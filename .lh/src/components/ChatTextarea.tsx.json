{
    "sourceFile": "src/components/ChatTextarea.tsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 110,
            "patches": [
                {
                    "date": 1681460220455,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1681460242595,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -11,9 +11,9 @@\n export function ChatTextarea() {\n   return (\n     <>\n       <Textarea\n-        placeholder=\"Your comment\"\n+        placeholder=\"Your question\"\n         withAsterisk\n       />\n     </>\n   )\n"
                },
                {
                    "date": 1681461285345,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,14 +1,14 @@\n /*\n  * @Author: Allen OYang\n  * @Email:  allenwill211@gmail.com\n  * @Date: 2023-04-14 16:09:48\n- * @LastEditTime: 2023-04-14 16:13:06\n+ * @LastEditTime: 2023-04-14 16:34:45\n  * @LastEditors: Allen OYang allenwill211@gmail.com\n- * @FilePath: /speak-gpt/src/components/ChatText.tsx\n+ * @FilePath: /speak-gpt/src/components/ChatTextarea.tsx\n  */\n \n-import { Textarea } from '@mantine/core';\n+import { Textarea, ActionIcon } from '@mantine/core';\n export function ChatTextarea() {\n   return (\n     <>\n       <Textarea\n"
                },
                {
                    "date": 1681461322984,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -7,11 +7,16 @@\n  * @FilePath: /speak-gpt/src/components/ChatTextarea.tsx\n  */\n \n import { Textarea, ActionIcon } from '@mantine/core';\n+import { IconAdjustments } from '@tabler/icons-react';\n+\n export function ChatTextarea() {\n   return (\n     <>\n+      <ActionIcon color=\"cyan\" size=\"lg\">\n+        <IconAdjustments size=\"1.625rem\" />\n+      </ActionIcon>\n       <Textarea\n         placeholder=\"Your question\"\n         withAsterisk\n       />\n"
                },
                {
                    "date": 1681461359866,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,14 +1,14 @@\n /*\n  * @Author: Allen OYang\n  * @Email:  allenwill211@gmail.com\n  * @Date: 2023-04-14 16:09:48\n- * @LastEditTime: 2023-04-14 16:34:45\n+ * @LastEditTime: 2023-04-14 16:35:59\n  * @LastEditors: Allen OYang allenwill211@gmail.com\n  * @FilePath: /speak-gpt/src/components/ChatTextarea.tsx\n  */\n \n-import { Textarea, ActionIcon } from '@mantine/core';\n+import { Textarea, ActionIcon, Button } from '@mantine/core';\n import { IconAdjustments } from '@tabler/icons-react';\n \n export function ChatTextarea() {\n   return (\n@@ -19,7 +19,8 @@\n       <Textarea\n         placeholder=\"Your question\"\n         withAsterisk\n       />\n+        <Button variant=\"gradient\" gradient={{ from: 'indigo', to: 'cyan' }}>Indigo cyan</Button>\n     </>\n   )\n }\n\\ No newline at end of file\n"
                },
                {
                    "date": 1681461640587,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,16 +1,21 @@\n /*\n  * @Author: Allen OYang\n  * @Email:  allenwill211@gmail.com\n  * @Date: 2023-04-14 16:09:48\n- * @LastEditTime: 2023-04-14 16:35:59\n+ * @LastEditTime: 2023-04-14 16:40:40\n  * @LastEditors: Allen OYang allenwill211@gmail.com\n  * @FilePath: /speak-gpt/src/components/ChatTextarea.tsx\n  */\n \n-import { Textarea, ActionIcon, Button } from '@mantine/core';\n-import { IconAdjustments } from '@tabler/icons-react';\n+import {\n+  Textarea,\n+  ActionIcon,\n+  Button\n+} from '@mantine/core';\n \n+import { IconAdjustments, IconSend } from '@tabler/icons-react';\n+\n export function ChatTextarea() {\n   return (\n     <>\n       <ActionIcon color=\"cyan\" size=\"lg\">\n@@ -19,8 +24,8 @@\n       <Textarea\n         placeholder=\"Your question\"\n         withAsterisk\n       />\n-        <Button variant=\"gradient\" gradient={{ from: 'indigo', to: 'cyan' }}>Indigo cyan</Button>\n+      <Button leftIcon={IconSend}>Indigo cyan</Button>\n     </>\n   )\n }\n\\ No newline at end of file\n"
                },
                {
                    "date": 1681461711174,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,21 +1,30 @@\n /*\n  * @Author: Allen OYang\n  * @Email:  allenwill211@gmail.com\n  * @Date: 2023-04-14 16:09:48\n- * @LastEditTime: 2023-04-14 16:40:40\n+ * @LastEditTime: 2023-04-14 16:41:51\n  * @LastEditors: Allen OYang allenwill211@gmail.com\n  * @FilePath: /speak-gpt/src/components/ChatTextarea.tsx\n  */\n \n import {\n   Textarea,\n   ActionIcon,\n-  Button\n+  Button,\n+  createStyles,\n } from '@mantine/core';\n \n import { IconAdjustments, IconSend } from '@tabler/icons-react';\n \n+const styles = createStyles((theme) => ({\n+  container: {\n+    display: 'flex',\n+    alignItems: 'center',\n+    justifyContent: 'space-between',\n+  }\n+}));\n+\n export function ChatTextarea() {\n   return (\n     <>\n       <ActionIcon color=\"cyan\" size=\"lg\">\n@@ -24,8 +33,8 @@\n       <Textarea\n         placeholder=\"Your question\"\n         withAsterisk\n       />\n-      <Button leftIcon={IconSend}>Indigo cyan</Button>\n+      <Button leftIcon={<IconSend />}>Indigo cyan</Button>\n     </>\n   )\n }\n\\ No newline at end of file\n"
                },
                {
                    "date": 1681461750541,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -15,17 +15,19 @@\n } from '@mantine/core';\n \n import { IconAdjustments, IconSend } from '@tabler/icons-react';\n \n-const styles = createStyles((theme) => ({\n+const useStyles = createStyles((theme) => ({\n   container: {\n     display: 'flex',\n     alignItems: 'center',\n     justifyContent: 'space-between',\n   }\n }));\n \n export function ChatTextarea() {\n+  const { classes, theme } = useStyles();\n+  \n   return (\n     <>\n       <ActionIcon color=\"cyan\" size=\"lg\">\n         <IconAdjustments size=\"1.625rem\" />\n"
                },
                {
                    "date": 1681461781940,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,9 @@\n /*\n  * @Author: Allen OYang\n  * @Email:  allenwill211@gmail.com\n  * @Date: 2023-04-14 16:09:48\n- * @LastEditTime: 2023-04-14 16:41:51\n+ * @LastEditTime: 2023-04-14 16:43:01\n  * @LastEditors: Allen OYang allenwill211@gmail.com\n  * @FilePath: /speak-gpt/src/components/ChatTextarea.tsx\n  */\n \n@@ -25,18 +25,18 @@\n }));\n \n export function ChatTextarea() {\n   const { classes, theme } = useStyles();\n-  \n+\n   return (\n-    <>\n+    <div className={classes.container}>\n       <ActionIcon color=\"cyan\" size=\"lg\">\n         <IconAdjustments size=\"1.625rem\" />\n       </ActionIcon>\n       <Textarea\n         placeholder=\"Your question\"\n         withAsterisk\n       />\n       <Button leftIcon={<IconSend />}>Indigo cyan</Button>\n-    </>\n+    </div>\n   )\n }\n\\ No newline at end of file\n"
                },
                {
                    "date": 1681461807013,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -20,9 +20,14 @@\n   container: {\n     display: 'flex',\n     alignItems: 'center',\n     justifyContent: 'space-between',\n+  },\n+\n+  textarea: {\n+    flex: 1,\n   }\n+\n }));\n \n export function ChatTextarea() {\n   const { classes, theme } = useStyles();\n@@ -31,9 +36,11 @@\n     <div className={classes.container}>\n       <ActionIcon color=\"cyan\" size=\"lg\">\n         <IconAdjustments size=\"1.625rem\" />\n       </ActionIcon>\n+\n       <Textarea\n+      className={classes.textarea}\n         placeholder=\"Your question\"\n         withAsterisk\n       />\n       <Button leftIcon={<IconSend />}>Indigo cyan</Button>\n"
                },
                {
                    "date": 1681461850113,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,9 @@\n /*\n  * @Author: Allen OYang\n  * @Email:  allenwill211@gmail.com\n  * @Date: 2023-04-14 16:09:48\n- * @LastEditTime: 2023-04-14 16:43:01\n+ * @LastEditTime: 2023-04-14 16:44:10\n  * @LastEditors: Allen OYang allenwill211@gmail.com\n  * @FilePath: /speak-gpt/src/components/ChatTextarea.tsx\n  */\n \n@@ -21,29 +21,32 @@\n     display: 'flex',\n     alignItems: 'center',\n     justifyContent: 'space-between',\n   },\n-\n   textarea: {\n     flex: 1,\n   }\n-\n }));\n \n export function ChatTextarea() {\n   const { classes, theme } = useStyles();\n \n   return (\n     <div className={classes.container}>\n-      <ActionIcon color=\"cyan\" size=\"lg\">\n-        <IconAdjustments size=\"1.625rem\" />\n-      </ActionIcon>\n \n+\n+      <Button leftIcon={\n+        <ActionIcon color=\"cyan\" size=\"lg\">\n+          <IconAdjustments size=\"1.625rem\" />\n+        </ActionIcon>\n+      } />\n+\n+\n       <Textarea\n-      className={classes.textarea}\n+        className={classes.textarea}\n         placeholder=\"Your question\"\n         withAsterisk\n       />\n-      <Button leftIcon={<IconSend />}>Indigo cyan</Button>\n+      <Button leftIcon={<IconSend />} />\n     </div>\n   )\n }\n\\ No newline at end of file\n"
                },
                {
                    "date": 1681461875562,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -32,21 +32,16 @@\n \n   return (\n     <div className={classes.container}>\n \n+      <IconAdjustments size=\"1.625rem\" />\n \n-      <Button leftIcon={\n-        <ActionIcon color=\"cyan\" size=\"lg\">\n-          <IconAdjustments size=\"1.625rem\" />\n-        </ActionIcon>\n-      } />\n \n-\n       <Textarea\n         className={classes.textarea}\n         placeholder=\"Your question\"\n         withAsterisk\n       />\n-      <Button leftIcon={<IconSend />} />\n+      <IconSend size=\"1.625rem\" />\n     </div>\n   )\n }\n\\ No newline at end of file\n"
                },
                {
                    "date": 1681461888899,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -32,16 +32,22 @@\n \n   return (\n     <div className={classes.container}>\n \n-      <IconAdjustments size=\"1.625rem\" />\n \n+        <ActionIcon color=\"cyan\" size=\"lg\">\n+          <IconAdjustments size=\"1.625rem\" />\n+        </ActionIcon>\n \n+\n       <Textarea\n         className={classes.textarea}\n         placeholder=\"Your question\"\n         withAsterisk\n       />\n-      <IconSend size=\"1.625rem\" />\n+\n+      <ActionIcon color=\"cyan\" size=\"lg\">\n+          <IconSend size=\"1.625rem\" />\n+        </ActionIcon>\n     </div>\n   )\n }\n\\ No newline at end of file\n"
                },
                {
                    "date": 1681461922043,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,9 @@\n /*\n  * @Author: Allen OYang\n  * @Email:  allenwill211@gmail.com\n  * @Date: 2023-04-14 16:09:48\n- * @LastEditTime: 2023-04-14 16:44:10\n+ * @LastEditTime: 2023-04-14 16:45:21\n  * @LastEditors: Allen OYang allenwill211@gmail.com\n  * @FilePath: /speak-gpt/src/components/ChatTextarea.tsx\n  */\n \n@@ -32,22 +32,20 @@\n \n   return (\n     <div className={classes.container}>\n \n+      <ActionIcon color=\"cyan\" size=\"lg\">\n+        <IconAdjustments size=\"1.625rem\" />\n+      </ActionIcon>\n \n-        <ActionIcon color=\"cyan\" size=\"lg\">\n-          <IconAdjustments size=\"1.625rem\" />\n-        </ActionIcon>\n-\n-\n       <Textarea\n         className={classes.textarea}\n         placeholder=\"Your question\"\n         withAsterisk\n       />\n \n       <ActionIcon color=\"cyan\" size=\"lg\">\n-          <IconSend size=\"1.625rem\" />\n-        </ActionIcon>\n+        <IconSend size=\"1.625rem\" />\n+      </ActionIcon>\n     </div>\n   )\n }\n\\ No newline at end of file\n"
                },
                {
                    "date": 1681461933830,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -45,7 +45,8 @@\n \n       <ActionIcon color=\"cyan\" size=\"lg\">\n         <IconSend size=\"1.625rem\" />\n       </ActionIcon>\n+      \n     </div>\n   )\n }\n\\ No newline at end of file\n"
                },
                {
                    "date": 1681461958063,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -32,21 +32,25 @@\n \n   return (\n     <div className={classes.container}>\n \n-      <ActionIcon color=\"cyan\" size=\"lg\">\n-        <IconAdjustments size=\"1.625rem\" />\n-      </ActionIcon>\n+      <div>\n+        <ActionIcon color=\"cyan\" size=\"lg\">\n+          <IconAdjustments size=\"1.625rem\" />\n+        </ActionIcon>\n+      </div>\n \n       <Textarea\n         className={classes.textarea}\n         placeholder=\"Your question\"\n         withAsterisk\n       />\n \n-      <ActionIcon color=\"cyan\" size=\"lg\">\n-        <IconSend size=\"1.625rem\" />\n-      </ActionIcon>\n-      \n+      <div>\n+        <ActionIcon color=\"cyan\" size=\"lg\">\n+          <IconSend size=\"1.625rem\" />\n+        </ActionIcon>\n+      </div>\n+\n     </div>\n   )\n }\n\\ No newline at end of file\n"
                },
                {
                    "date": 1681462033227,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,9 @@\n /*\n  * @Author: Allen OYang\n  * @Email:  allenwill211@gmail.com\n  * @Date: 2023-04-14 16:09:48\n- * @LastEditTime: 2023-04-14 16:45:21\n+ * @LastEditTime: 2023-04-14 16:47:13\n  * @LastEditors: Allen OYang allenwill211@gmail.com\n  * @FilePath: /speak-gpt/src/components/ChatTextarea.tsx\n  */\n \n@@ -23,8 +23,11 @@\n     justifyContent: 'space-between',\n   },\n   textarea: {\n     flex: 1,\n+  },\n+  iconContainer: {\n+    \n   }\n }));\n \n export function ChatTextarea() {\n"
                },
                {
                    "date": 1681462061916,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -25,9 +25,10 @@\n   textarea: {\n     flex: 1,\n   },\n   iconContainer: {\n-    \n+    height: '100%',\n+    backgroundColor: theme.colorScheme === 'dark' ? theme.colors.dark[7] : theme.colors.gray[0],\n   }\n }));\n \n export function ChatTextarea() {\n"
                },
                {
                    "date": 1681462084051,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -36,9 +36,9 @@\n \n   return (\n     <div className={classes.container}>\n \n-      <div>\n+      <div className={classes.iconContainer}>\n         <ActionIcon color=\"cyan\" size=\"lg\">\n           <IconAdjustments size=\"1.625rem\" />\n         </ActionIcon>\n       </div>\n@@ -48,9 +48,9 @@\n         placeholder=\"Your question\"\n         withAsterisk\n       />\n \n-      <div>\n+      <div className={classes.iconContainer}>\n         <ActionIcon color=\"cyan\" size=\"lg\">\n           <IconSend size=\"1.625rem\" />\n         </ActionIcon>\n       </div>\n"
                },
                {
                    "date": 1681462109410,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,9 @@\n /*\n  * @Author: Allen OYang\n  * @Email:  allenwill211@gmail.com\n  * @Date: 2023-04-14 16:09:48\n- * @LastEditTime: 2023-04-14 16:47:13\n+ * @LastEditTime: 2023-04-14 16:48:29\n  * @LastEditors: Allen OYang allenwill211@gmail.com\n  * @FilePath: /speak-gpt/src/components/ChatTextarea.tsx\n  */\n \n@@ -36,14 +36,8 @@\n \n   return (\n     <div className={classes.container}>\n \n-      <div className={classes.iconContainer}>\n-        <ActionIcon color=\"cyan\" size=\"lg\">\n-          <IconAdjustments size=\"1.625rem\" />\n-        </ActionIcon>\n-      </div>\n-\n       <Textarea\n         className={classes.textarea}\n         placeholder=\"Your question\"\n         withAsterisk\n"
                },
                {
                    "date": 1681462120804,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -34,21 +34,32 @@\n export function ChatTextarea() {\n   const { classes, theme } = useStyles();\n \n   return (\n-    <div className={classes.container}>\n \n-      <Textarea\n-        className={classes.textarea}\n-        placeholder=\"Your question\"\n-        withAsterisk\n-      />\n+    <>\n \n       <div className={classes.iconContainer}>\n         <ActionIcon color=\"cyan\" size=\"lg\">\n-          <IconSend size=\"1.625rem\" />\n+          <IconAdjustments size=\"1.625rem\" />\n         </ActionIcon>\n       </div>\n \n-    </div>\n+\n+      <div className={classes.container}>\n+\n+        <Textarea\n+          className={classes.textarea}\n+          placeholder=\"Your question\"\n+          withAsterisk\n+        />\n+\n+        <div className={classes.iconContainer}>\n+          <ActionIcon color=\"cyan\" size=\"lg\">\n+            <IconSend size=\"1.625rem\" />\n+          </ActionIcon>\n+        </div>\n+\n+      </div>\n+    </>\n   )\n }\n\\ No newline at end of file\n"
                },
                {
                    "date": 1681462135406,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -36,18 +36,13 @@\n \n   return (\n \n     <>\n-\n-      <div className={classes.iconContainer}>\n         <ActionIcon color=\"cyan\" size=\"lg\">\n           <IconAdjustments size=\"1.625rem\" />\n         </ActionIcon>\n-      </div>\n \n-\n       <div className={classes.container}>\n-\n         <Textarea\n           className={classes.textarea}\n           placeholder=\"Your question\"\n           withAsterisk\n@@ -57,9 +52,8 @@\n           <ActionIcon color=\"cyan\" size=\"lg\">\n             <IconSend size=\"1.625rem\" />\n           </ActionIcon>\n         </div>\n-\n       </div>\n     </>\n   )\n }\n\\ No newline at end of file\n"
                },
                {
                    "date": 1681462147908,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -26,9 +26,8 @@\n     flex: 1,\n   },\n   iconContainer: {\n     height: '100%',\n-    backgroundColor: theme.colorScheme === 'dark' ? theme.colors.dark[7] : theme.colors.gray[0],\n   }\n }));\n \n export function ChatTextarea() {\n@@ -36,11 +35,11 @@\n \n   return (\n \n     <>\n-        <ActionIcon color=\"cyan\" size=\"lg\">\n-          <IconAdjustments size=\"1.625rem\" />\n-        </ActionIcon>\n+      <ActionIcon color=\"cyan\" size=\"lg\">\n+        <IconAdjustments size=\"1.625rem\" />\n+      </ActionIcon>\n \n       <div className={classes.container}>\n         <Textarea\n           className={classes.textarea}\n"
                },
                {
                    "date": 1681462159381,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -26,8 +26,11 @@\n     flex: 1,\n   },\n   iconContainer: {\n     height: '100%',\n+    display: 'flex',\n+    alignItems: 'center',\n+    justifyContent: 'center',\n   }\n }));\n \n export function ChatTextarea() {\n"
                },
                {
                    "date": 1681462214062,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,9 @@\n /*\n  * @Author: Allen OYang\n  * @Email:  allenwill211@gmail.com\n  * @Date: 2023-04-14 16:09:48\n- * @LastEditTime: 2023-04-14 16:48:29\n+ * @LastEditTime: 2023-04-14 16:50:13\n  * @LastEditors: Allen OYang allenwill211@gmail.com\n  * @FilePath: /speak-gpt/src/components/ChatTextarea.tsx\n  */\n \n@@ -29,33 +29,33 @@\n     height: '100%',\n     display: 'flex',\n     alignItems: 'center',\n     justifyContent: 'center',\n+    position: 'absolute',\n+    translate: 'translateX(-100%)',\n+\n   }\n }));\n \n export function ChatTextarea() {\n   const { classes, theme } = useStyles();\n \n   return (\n \n-    <>\n+    <div>\n       <ActionIcon color=\"cyan\" size=\"lg\">\n         <IconAdjustments size=\"1.625rem\" />\n       </ActionIcon>\n \n-      <div className={classes.container}>\n-        <Textarea\n-          className={classes.textarea}\n-          placeholder=\"Your question\"\n-          withAsterisk\n-        />\n-\n-        <div className={classes.iconContainer}>\n-          <ActionIcon color=\"cyan\" size=\"lg\">\n-            <IconSend size=\"1.625rem\" />\n-          </ActionIcon>\n-        </div>\n+      <Textarea\n+        className={classes.textarea}\n+        placeholder=\"Your question\"\n+        withAsterisk\n+      />\n+      <div className={classes.iconContainer}>\n+        <ActionIcon color=\"cyan\" size=\"lg\">\n+          <IconSend size=\"1.625rem\" />\n+        </ActionIcon>\n       </div>\n-    </>\n+    </div>\n   )\n }\n\\ No newline at end of file\n"
                },
                {
                    "date": 1681462225928,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -55,7 +55,8 @@\n         <ActionIcon color=\"cyan\" size=\"lg\">\n           <IconSend size=\"1.625rem\" />\n         </ActionIcon>\n       </div>\n+      \n     </div>\n   )\n }\n\\ No newline at end of file\n"
                },
                {
                    "date": 1681462246520,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -20,8 +20,9 @@\n   container: {\n     display: 'flex',\n     alignItems: 'center',\n     justifyContent: 'space-between',\n+    position:relative,\n   },\n   textarea: {\n     flex: 1,\n   },\n@@ -55,8 +56,8 @@\n         <ActionIcon color=\"cyan\" size=\"lg\">\n           <IconSend size=\"1.625rem\" />\n         </ActionIcon>\n       </div>\n-      \n+\n     </div>\n   )\n }\n\\ No newline at end of file\n"
                },
                {
                    "date": 1681462296499,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,9 @@\n /*\n  * @Author: Allen OYang\n  * @Email:  allenwill211@gmail.com\n  * @Date: 2023-04-14 16:09:48\n- * @LastEditTime: 2023-04-14 16:50:13\n+ * @LastEditTime: 2023-04-14 16:51:36\n  * @LastEditors: Allen OYang allenwill211@gmail.com\n  * @FilePath: /speak-gpt/src/components/ChatTextarea.tsx\n  */\n \n@@ -20,9 +20,9 @@\n   container: {\n     display: 'flex',\n     alignItems: 'center',\n     justifyContent: 'space-between',\n-    position:relative,\n+    position: 'relative',\n   },\n   textarea: {\n     flex: 1,\n   },\n@@ -30,10 +30,9 @@\n     height: '100%',\n     display: 'flex',\n     alignItems: 'center',\n     justifyContent: 'center',\n-    position: 'absolute',\n-    translate: 'translateX(-100%)',\n+   \n \n   }\n }));\n \n"
                },
                {
                    "date": 1681462315033,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,9 @@\n /*\n  * @Author: Allen OYang\n  * @Email:  allenwill211@gmail.com\n  * @Date: 2023-04-14 16:09:48\n- * @LastEditTime: 2023-04-14 16:51:36\n+ * @LastEditTime: 2023-04-14 16:50:13\n  * @LastEditors: Allen OYang allenwill211@gmail.com\n  * @FilePath: /speak-gpt/src/components/ChatTextarea.tsx\n  */\n \n@@ -27,11 +27,9 @@\n     flex: 1,\n   },\n   iconContainer: {\n     height: '100%',\n-    display: 'flex',\n-    alignItems: 'center',\n-    justifyContent: 'center',\n+\n    \n \n   }\n }));\n"
                },
                {
                    "date": 1681462372329,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,9 @@\n /*\n  * @Author: Allen OYang\n  * @Email:  allenwill211@gmail.com\n  * @Date: 2023-04-14 16:09:48\n- * @LastEditTime: 2023-04-14 16:50:13\n+ * @LastEditTime: 2023-04-14 16:52:52\n  * @LastEditors: Allen OYang allenwill211@gmail.com\n  * @FilePath: /speak-gpt/src/components/ChatTextarea.tsx\n  */\n \n@@ -27,10 +27,12 @@\n     flex: 1,\n   },\n   iconContainer: {\n     height: '100%',\n+    display: 'flex',\n+    alignItems: 'center',\n+    justifyContent: 'center',\n \n-   \n \n   }\n }));\n \n@@ -43,17 +45,19 @@\n       <ActionIcon color=\"cyan\" size=\"lg\">\n         <IconAdjustments size=\"1.625rem\" />\n       </ActionIcon>\n \n-      <Textarea\n-        className={classes.textarea}\n-        placeholder=\"Your question\"\n-        withAsterisk\n-      />\n-      <div className={classes.iconContainer}>\n-        <ActionIcon color=\"cyan\" size=\"lg\">\n-          <IconSend size=\"1.625rem\" />\n-        </ActionIcon>\n+      <div className={classes.container}>\n+        <Textarea\n+          className={classes.textarea}\n+          placeholder=\"Your question\"\n+          withAsterisk\n+        />\n+        <div className={classes.iconContainer}>\n+          <ActionIcon color=\"cyan\" size=\"lg\">\n+            <IconSend size=\"1.625rem\" />\n+          </ActionIcon>\n+        </div>\n       </div>\n \n     </div>\n   )\n"
                },
                {
                    "date": 1681462394379,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -30,10 +30,11 @@\n     height: '100%',\n     display: 'flex',\n     alignItems: 'center',\n     justifyContent: 'center',\n+    position: 'absolute',\n+    transform: 'translateX(100%)',\n \n-\n   }\n }));\n \n export function ChatTextarea() {\n"
                },
                {
                    "date": 1681462413826,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -31,9 +31,10 @@\n     display: 'flex',\n     alignItems: 'center',\n     justifyContent: 'center',\n     position: 'absolute',\n-    transform: 'translateX(100%)',\n+    right: 0,\n+    transform: 'translateX(-100%)',\n \n   }\n }));\n \n"
                },
                {
                    "date": 1681462435060,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,9 @@\n /*\n  * @Author: Allen OYang\n  * @Email:  allenwill211@gmail.com\n  * @Date: 2023-04-14 16:09:48\n- * @LastEditTime: 2023-04-14 16:52:52\n+ * @LastEditTime: 2023-04-14 16:53:55\n  * @LastEditors: Allen OYang allenwill211@gmail.com\n  * @FilePath: /speak-gpt/src/components/ChatTextarea.tsx\n  */\n \n@@ -32,10 +32,8 @@\n     alignItems: 'center',\n     justifyContent: 'center',\n     position: 'absolute',\n     right: 0,\n-    transform: 'translateX(-100%)',\n-\n   }\n }));\n \n export function ChatTextarea() {\n"
                },
                {
                    "date": 1681462446437,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -32,8 +32,9 @@\n     alignItems: 'center',\n     justifyContent: 'center',\n     position: 'absolute',\n     right: 0,\n+    padding: 10\n   }\n }));\n \n export function ChatTextarea() {\n"
                },
                {
                    "date": 1681462454874,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -32,9 +32,9 @@\n     alignItems: 'center',\n     justifyContent: 'center',\n     position: 'absolute',\n     right: 0,\n-    padding: 10\n+    padding: `${theme.spacing.xs} ${theme.spacing.sm}`\n   }\n }));\n \n export function ChatTextarea() {\n"
                },
                {
                    "date": 1681462474427,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -40,9 +40,8 @@\n export function ChatTextarea() {\n   const { classes, theme } = useStyles();\n \n   return (\n-\n     <div>\n       <ActionIcon color=\"cyan\" size=\"lg\">\n         <IconAdjustments size=\"1.625rem\" />\n       </ActionIcon>\n@@ -58,8 +57,7 @@\n             <IconSend size=\"1.625rem\" />\n           </ActionIcon>\n         </div>\n       </div>\n-\n     </div>\n   )\n }\n\\ No newline at end of file\n"
                },
                {
                    "date": 1681606010553,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,9 @@\n /*\n  * @Author: Allen OYang\n  * @Email:  allenwill211@gmail.com\n  * @Date: 2023-04-14 16:09:48\n- * @LastEditTime: 2023-04-14 16:53:55\n+ * @LastEditTime: 2023-04-16 08:46:50\n  * @LastEditors: Allen OYang allenwill211@gmail.com\n  * @FilePath: /speak-gpt/src/components/ChatTextarea.tsx\n  */\n \n@@ -13,9 +13,9 @@\n   Button,\n   createStyles,\n } from '@mantine/core';\n \n-import { IconAdjustments, IconSend } from '@tabler/icons-react';\n+import { IconMicrophone2, IconSend } from '@tabler/icons-react';\n \n const useStyles = createStyles((theme) => ({\n   container: {\n     display: 'flex',\n@@ -42,9 +42,9 @@\n \n   return (\n     <div>\n       <ActionIcon color=\"cyan\" size=\"lg\">\n-        <IconAdjustments size=\"1.625rem\" />\n+        <IconMicrophone2 size=\"1.625rem\" />\n       </ActionIcon>\n \n       <div className={classes.container}>\n         <Textarea\n"
                },
                {
                    "date": 1681606137672,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,9 @@\n /*\n  * @Author: Allen OYang\n  * @Email:  allenwill211@gmail.com\n  * @Date: 2023-04-14 16:09:48\n- * @LastEditTime: 2023-04-16 08:46:50\n+ * @LastEditTime: 2023-04-16 08:48:57\n  * @LastEditors: Allen OYang allenwill211@gmail.com\n  * @FilePath: /speak-gpt/src/components/ChatTextarea.tsx\n  */\n \n@@ -13,9 +13,14 @@\n   Button,\n   createStyles,\n } from '@mantine/core';\n \n-import { IconMicrophone2, IconSend } from '@tabler/icons-react';\n+import {\n+  IconMicrophone2,\n+  IconSend,\n+  IconMicrophone2Off\n+} from '@tabler/icons-react';\n+import { useState } from 'react';\n \n const useStyles = createStyles((theme) => ({\n   container: {\n     display: 'flex',\n@@ -39,12 +44,21 @@\n \n export function ChatTextarea() {\n   const { classes, theme } = useStyles();\n \n+  const [isOpen, setOpen] = useState(false);\n+\n+  const handleOpen = () => {\n+    setOpen(!isOpen);\n+  }\n+\n   return (\n     <div>\n-      <ActionIcon color=\"cyan\" size=\"lg\">\n-        <IconMicrophone2 size=\"1.625rem\" />\n+      <ActionIcon color=\"cyan\" size=\"lg\" onClick={handleOpen}>\n+        {\n+\n+          isOpen ? <IconMicrophone2 size=\"1.625rem\" /> : <IconMicrophone2Off size=\"1.625rem\" />\n+        }\n       </ActionIcon>\n \n       <div className={classes.container}>\n         <Textarea\n"
                },
                {
                    "date": 1681606600490,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,8 +1,16 @@\n /*\n  * @Author: Allen OYang\n  * @Email:  allenwill211@gmail.com\n  * @Date: 2023-04-14 16:09:48\n+ * @LastEditTime: 2023-04-16 08:56:40\n+ * @LastEditors: Allen OYang allenwill211@gmail.com\n+ * @FilePath: /speak-gpt/src/components/ChatTextarea.tsx\n+ */\n+/*\n+ * @Author: Allen OYang\n+ * @Email:  allenwill211@gmail.com\n+ * @Date: 2023-04-14 16:09:48\n  * @LastEditTime: 2023-04-16 08:48:57\n  * @LastEditors: Allen OYang allenwill211@gmail.com\n  * @FilePath: /speak-gpt/src/components/ChatTextarea.tsx\n  */\n"
                },
                {
                    "date": 1681606962914,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -5,16 +5,8 @@\n  * @LastEditTime: 2023-04-16 08:56:40\n  * @LastEditors: Allen OYang allenwill211@gmail.com\n  * @FilePath: /speak-gpt/src/components/ChatTextarea.tsx\n  */\n-/*\n- * @Author: Allen OYang\n- * @Email:  allenwill211@gmail.com\n- * @Date: 2023-04-14 16:09:48\n- * @LastEditTime: 2023-04-16 08:48:57\n- * @LastEditors: Allen OYang allenwill211@gmail.com\n- * @FilePath: /speak-gpt/src/components/ChatTextarea.tsx\n- */\n \n import {\n   Textarea,\n   ActionIcon,\n@@ -26,9 +18,10 @@\n   IconMicrophone2,\n   IconSend,\n   IconMicrophone2Off\n } from '@tabler/icons-react';\n-import { useState } from 'react';\n+import { useRef, useState } from 'react';\n+import { MicrophoneRecord } from '@/utils/MicrophoneRecord'\n \n const useStyles = createStyles((theme) => ({\n   container: {\n     display: 'flex',\n@@ -51,12 +44,14 @@\n }));\n \n export function ChatTextarea() {\n   const { classes, theme } = useStyles();\n-\n   const [isOpen, setOpen] = useState(false);\n+  const record = useRef()\n \n   const handleOpen = () => {\n+\n+    record.current = new MicrophoneRecord()\n     setOpen(!isOpen);\n   }\n \n   return (\n"
                },
                {
                    "date": 1681607094812,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,9 @@\n /*\n  * @Author: Allen OYang\n  * @Email:  allenwill211@gmail.com\n  * @Date: 2023-04-14 16:09:48\n- * @LastEditTime: 2023-04-16 08:56:40\n+ * @LastEditTime: 2023-04-16 09:04:53\n  * @LastEditors: Allen OYang allenwill211@gmail.com\n  * @FilePath: /speak-gpt/src/components/ChatTextarea.tsx\n  */\n \n@@ -45,13 +45,14 @@\n \n export function ChatTextarea() {\n   const { classes, theme } = useStyles();\n   const [isOpen, setOpen] = useState(false);\n-  const record = useRef()\n+  const record = useRef<MicrophoneRecord>()\n \n   const handleOpen = () => {\n-\n-    record.current = new MicrophoneRecord()\n+    record.current = new MicrophoneRecord(() => {\n+      console.log('init success')\n+    })\n     setOpen(!isOpen);\n   }\n \n   return (\n"
                },
                {
                    "date": 1681607840439,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,80 @@\n+/*\n+ * @Author: Allen OYang\n+ * @Email:  allenwill211@gmail.com\n+ * @Date: 2023-04-14 16:09:48\n+ * @LastEditTime: 2023-04-16 09:04:53\n+ * @LastEditors: Allen OYang allenwill211@gmail.com\n+ * @FilePath: /speak-gpt/src/components/ChatTextarea.tsx\n+ */\n+\n+import {\n+  Textarea,\n+  ActionIcon,\n+  Button,\n+  createStyles,\n+} from '@mantine/core';\n+\n+import {\n+  IconMicrophone2,\n+  IconSend,\n+  IconMicrophone2Off\n+} from '@tabler/icons-react';\n+import { useRef, useState } from 'react';\n+import { MicrophoneRecord } from '@/utils/MicrophoneRecord'\n+\n+const useStyles = createStyles((theme) => ({\n+  container: {\n+    display: 'flex',\n+    alignItems: 'center',\n+    justifyContent: 'space-between',\n+    position: 'relative',\n+  },\n+  textarea: {\n+    flex: 1,\n+  },\n+  iconContainer: {\n+    height: '100%',\n+    display: 'flex',\n+    alignItems: 'center',\n+    justifyContent: 'center',\n+    position: 'absolute',\n+    right: 0,\n+    padding: `${theme.spacing.xs} ${theme.spacing.sm}`\n+  }\n+}));\n+\n+export function ChatTextarea() {\n+  const { classes, theme } = useStyles();\n+  const [isOpen, setOpen] = useState(false);\n+  const record = useRef<MicrophoneRecord>()\n+\n+  const handleOpen = () => {\n+    record.current = new MicrophoneRecord()\n+    record.current.\n+    setOpen(!isOpen);\n+  }\n+\n+  return (\n+    <div>\n+      <ActionIcon color=\"cyan\" size=\"lg\" onClick={handleOpen}>\n+        {\n+\n+          isOpen ? <IconMicrophone2 size=\"1.625rem\" /> : <IconMicrophone2Off size=\"1.625rem\" />\n+        }\n+      </ActionIcon>\n+\n+      <div className={classes.container}>\n+        <Textarea\n+          className={classes.textarea}\n+          placeholder=\"Your question\"\n+          withAsterisk\n+        />\n+        <div className={classes.iconContainer}>\n+          <ActionIcon color=\"cyan\" size=\"lg\">\n+            <IconSend size=\"1.625rem\" />\n+          </ActionIcon>\n+        </div>\n+      </div>\n+    </div>\n+  )\n+}\n\\ No newline at end of file\n"
                },
                {
                    "date": 1681607848372,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,9 @@\n /*\n  * @Author: Allen OYang\n  * @Email:  allenwill211@gmail.com\n  * @Date: 2023-04-14 16:09:48\n- * @LastEditTime: 2023-04-16 09:04:53\n+ * @LastEditTime: 2023-04-16 09:17:28\n  * @LastEditors: Allen OYang allenwill211@gmail.com\n  * @FilePath: /speak-gpt/src/components/ChatTextarea.tsx\n  */\n \n@@ -49,9 +49,9 @@\n   const record = useRef<MicrophoneRecord>()\n \n   const handleOpen = () => {\n     record.current = new MicrophoneRecord()\n-    record.current.\n+    record.current.start()\n     setOpen(!isOpen);\n   }\n \n   return (\n@@ -76,86 +76,5 @@\n         </div>\n       </div>\n     </div>\n   )\n-}\n-/*\n- * @Author: Allen OYang\n- * @Email:  allenwill211@gmail.com\n- * @Date: 2023-04-14 16:09:48\n- * @LastEditTime: 2023-04-16 09:04:53\n- * @LastEditors: Allen OYang allenwill211@gmail.com\n- * @FilePath: /speak-gpt/src/components/ChatTextarea.tsx\n- */\n-\n-import {\n-  Textarea,\n-  ActionIcon,\n-  Button,\n-  createStyles,\n-} from '@mantine/core';\n-\n-import {\n-  IconMicrophone2,\n-  IconSend,\n-  IconMicrophone2Off\n-} from '@tabler/icons-react';\n-import { useRef, useState } from 'react';\n-import { MicrophoneRecord } from '@/utils/MicrophoneRecord'\n-\n-const useStyles = createStyles((theme) => ({\n-  container: {\n-    display: 'flex',\n-    alignItems: 'center',\n-    justifyContent: 'space-between',\n-    position: 'relative',\n-  },\n-  textarea: {\n-    flex: 1,\n-  },\n-  iconContainer: {\n-    height: '100%',\n-    display: 'flex',\n-    alignItems: 'center',\n-    justifyContent: 'center',\n-    position: 'absolute',\n-    right: 0,\n-    padding: `${theme.spacing.xs} ${theme.spacing.sm}`\n-  }\n-}));\n-\n-export function ChatTextarea() {\n-  const { classes, theme } = useStyles();\n-  const [isOpen, setOpen] = useState(false);\n-  const record = useRef<MicrophoneRecord>()\n-\n-  const handleOpen = () => {\n-    record.current = new MicrophoneRecord(() => {\n-      console.log('init success')\n-    })\n-    setOpen(!isOpen);\n-  }\n-\n-  return (\n-    <div>\n-      <ActionIcon color=\"cyan\" size=\"lg\" onClick={handleOpen}>\n-        {\n-\n-          isOpen ? <IconMicrophone2 size=\"1.625rem\" /> : <IconMicrophone2Off size=\"1.625rem\" />\n-        }\n-      </ActionIcon>\n-\n-      <div className={classes.container}>\n-        <Textarea\n-          className={classes.textarea}\n-          placeholder=\"Your question\"\n-          withAsterisk\n-        />\n-        <div className={classes.iconContainer}>\n-          <ActionIcon color=\"cyan\" size=\"lg\">\n-            <IconSend size=\"1.625rem\" />\n-          </ActionIcon>\n-        </div>\n-      </div>\n-    </div>\n-  )\n }\n\\ No newline at end of file\n"
                },
                {
                    "date": 1681608082983,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,9 @@\n /*\n  * @Author: Allen OYang\n  * @Email:  allenwill211@gmail.com\n  * @Date: 2023-04-14 16:09:48\n- * @LastEditTime: 2023-04-16 09:17:28\n+ * @LastEditTime: 2023-04-16 09:21:22\n  * @LastEditors: Allen OYang allenwill211@gmail.com\n  * @FilePath: /speak-gpt/src/components/ChatTextarea.tsx\n  */\n \n@@ -49,10 +49,15 @@\n   const record = useRef<MicrophoneRecord>()\n \n   const handleOpen = () => {\n     record.current = new MicrophoneRecord()\n-    record.current.start()\n-    setOpen(!isOpen);\n+    if (isOpen) {\n+      record.current.stop()\n+      setOpen(false);\n+    } else {\n+      record.current.start()\n+      setOpen(true);\n+    }\n   }\n \n   return (\n     <div>\n"
                },
                {
                    "date": 1681608111521,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -50,8 +50,9 @@\n \n   const handleOpen = () => {\n     record.current = new MicrophoneRecord()\n     if (isOpen) {\n+      console.log('>>>>> stop')\n       record.current.stop()\n       setOpen(false);\n     } else {\n       record.current.start()\n"
                },
                {
                    "date": 1681609176499,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,9 @@\n /*\n  * @Author: Allen OYang\n  * @Email:  allenwill211@gmail.com\n  * @Date: 2023-04-14 16:09:48\n- * @LastEditTime: 2023-04-16 09:21:22\n+ * @LastEditTime: 2023-04-16 09:39:36\n  * @LastEditors: Allen OYang allenwill211@gmail.com\n  * @FilePath: /speak-gpt/src/components/ChatTextarea.tsx\n  */\n \n@@ -20,9 +20,11 @@\n   IconMicrophone2Off\n } from '@tabler/icons-react';\n import { useRef, useState } from 'react';\n import { MicrophoneRecord } from '@/utils/MicrophoneRecord'\n+import Recorder from 'js-audio-recorder';\n \n+\n const useStyles = createStyles((theme) => ({\n   container: {\n     display: 'flex',\n     alignItems: 'center',\n@@ -45,18 +47,20 @@\n \n export function ChatTextarea() {\n   const { classes, theme } = useStyles();\n   const [isOpen, setOpen] = useState(false);\n-  const record = useRef<MicrophoneRecord>()\n+  const record = useRef<Recorder>()\n \n-  const handleOpen = () => {\n-    record.current = new MicrophoneRecord()\n+  const handleOpen = async () => {\n+    record.current = new Recorder()\n+\n     if (isOpen) {\n-      console.log('>>>>> stop')\n-      record.current.stop()\n+      const bolb = record.current.getPCMBlob()\n       setOpen(false);\n     } else {\n-      record.current.start()\n+      record.current.start().then(() => {\n+        console.log('start record')\n+      })\n       setOpen(true);\n     }\n   }\n \n"
                },
                {
                    "date": 1681609190337,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -54,8 +54,9 @@\n     record.current = new Recorder()\n \n     if (isOpen) {\n       const bolb = record.current.getPCMBlob()\n+      record.current.play()\n       setOpen(false);\n     } else {\n       record.current.start().then(() => {\n         console.log('start record')\n"
                },
                {
                    "date": 1681609252387,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,9 @@\n /*\n  * @Author: Allen OYang\n  * @Email:  allenwill211@gmail.com\n  * @Date: 2023-04-14 16:09:48\n- * @LastEditTime: 2023-04-16 09:39:36\n+ * @LastEditTime: 2023-04-16 09:40:52\n  * @LastEditors: Allen OYang allenwill211@gmail.com\n  * @FilePath: /speak-gpt/src/components/ChatTextarea.tsx\n  */\n \n@@ -54,8 +54,9 @@\n     record.current = new Recorder()\n \n     if (isOpen) {\n       const bolb = record.current.getPCMBlob()\n+      console.log(' bolb ',bolb)\n       record.current.play()\n       setOpen(false);\n     } else {\n       record.current.start().then(() => {\n"
                },
                {
                    "date": 1681609283710,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -53,9 +53,9 @@\n   const handleOpen = async () => {\n     record.current = new Recorder()\n \n     if (isOpen) {\n-      const bolb = record.current.getPCMBlob()\n+      const bolb = record.current.pause()\n       console.log(' bolb ',bolb)\n       record.current.play()\n       setOpen(false);\n     } else {\n"
                },
                {
                    "date": 1681609370793,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,9 @@\n /*\n  * @Author: Allen OYang\n  * @Email:  allenwill211@gmail.com\n  * @Date: 2023-04-14 16:09:48\n- * @LastEditTime: 2023-04-16 09:40:52\n+ * @LastEditTime: 2023-04-16 09:42:50\n  * @LastEditors: Allen OYang allenwill211@gmail.com\n  * @FilePath: /speak-gpt/src/components/ChatTextarea.tsx\n  */\n \n@@ -53,10 +53,8 @@\n   const handleOpen = async () => {\n     record.current = new Recorder()\n \n     if (isOpen) {\n-      const bolb = record.current.pause()\n-      console.log(' bolb ',bolb)\n       record.current.play()\n       setOpen(false);\n     } else {\n       record.current.start().then(() => {\n"
                },
                {
                    "date": 1681609424476,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -53,8 +53,9 @@\n   const handleOpen = async () => {\n     record.current = new Recorder()\n \n     if (isOpen) {\n+      console.log('play');\n       record.current.play()\n       setOpen(false);\n     } else {\n       record.current.start().then(() => {\n"
                },
                {
                    "date": 1681611578863,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,9 @@\n /*\n  * @Author: Allen OYang\n  * @Email:  allenwill211@gmail.com\n  * @Date: 2023-04-14 16:09:48\n- * @LastEditTime: 2023-04-16 09:42:50\n+ * @LastEditTime: 2023-04-16 10:19:38\n  * @LastEditors: Allen OYang allenwill211@gmail.com\n  * @FilePath: /speak-gpt/src/components/ChatTextarea.tsx\n  */\n \n@@ -21,8 +21,9 @@\n } from '@tabler/icons-react';\n import { useRef, useState } from 'react';\n import { MicrophoneRecord } from '@/utils/MicrophoneRecord'\n import Recorder from 'js-audio-recorder';\n+import Player from 'js-audio-recorder/src/player/player';\n \n \n const useStyles = createStyles((theme) => ({\n   container: {\n@@ -44,12 +45,21 @@\n     padding: `${theme.spacing.xs} ${theme.spacing.sm}`\n   }\n }));\n \n+const config = {\n+  sampleBits: 16,\n+  sampleRate: 16000,\n+  numChannels: 1,\n+  compiling: false,       // 是否开启边录音边转化（后期改用web worker）\n+}\n+\n export function ChatTextarea() {\n   const { classes, theme } = useStyles();\n   const [isOpen, setOpen] = useState(false);\n   const record = useRef<Recorder>()\n+  let { current: recorder } = useRef<Recorder>()\n+  let { current: playTimer } = useRef<NodeJS.Timeout>()\n \n   const handleOpen = async () => {\n     record.current = new Recorder()\n \n@@ -64,8 +74,87 @@\n       setOpen(true);\n     }\n   }\n \n+  const startRecord = async () => {\n+\n+    if (!recorder) {\n+      recorder = new Recorder(config);\n+\n+      recorder.onprocess = function (duration) {\n+        // this.setState({\n+        //     duration: duration.toFixed(5),\n+        // });\n+        // 推荐使用 onprogress\n+      }\n+\n+      recorder.onprogress = (params) => {\n+        // console.log(recorder.duration);\n+        // console.log(recorder.fileSize);\n+        // 此处控制数据的收集频率\n+        if (config.compiling) {\n+          console.log('音频总数据：', params.data);\n+        }\n+      }\n+\n+      recorder.onplay = () => {\n+        console.log('%c回调监听，开始播放音频', 'color: #2196f3')\n+      }\n+      recorder.onpauseplay = () => {\n+        console.log('%c回调监听，暂停播放音频', 'color: #2196f3')\n+      }\n+      recorder.onresumeplay = () => {\n+        console.log('%c回调监听，恢复播放音频', 'color: #2196f3')\n+      }\n+      recorder.onstopplay = () => {\n+        console.log('%c回调监听，停止播放音频', 'color: #2196f3')\n+      }\n+      recorder.onplayend = () => {\n+        console.log('%c回调监听，音频已经完成播放', 'color: #2196f3')\n+        // 播放结束后，停止绘制canavs\n+        // this.stopDrawPlay();\n+      }\n+\n+      // 定时获取录音的数据并播放\n+      config.compiling && (playTimer = setInterval(() => {\n+        if (!recorder) {\n+          return;\n+        }\n+\n+        let newData = recorder.getNextData();\n+        if (!newData.length) {\n+          return;\n+        }\n+        let byteLength = newData[0].byteLength\n+        let buffer = new ArrayBuffer(newData.length * byteLength)\n+        let dataView = new DataView(buffer)\n+\n+        // 数据合并\n+        for (let i = 0, iLen = newData.length; i < iLen; ++i) {\n+          for (let j = 0, jLen = newData[i].byteLength; j < jLen; ++j) {\n+            dataView.setInt8(i * byteLength + j, newData[i].getInt8(j))\n+          }\n+        }\n+\n+        // 将录音数据转成WAV格式，并播放\n+        let a = Recorder.encodeWAV(dataView, config.sampleRate, config.sampleRate, config.numChannels, config.sampleBits, false)\n+        let blob: any = new Blob([a], { type: 'audio/wav' });\n+\n+        blob.arrayBuffer().then((arraybuffer: any) => {\n+          Player.play(arraybuffer);\n+        });\n+      }, 3000))\n+    } else {\n+      recorder.stop();\n+    }\n+\n+    recorder.start().then(() => {\n+      console.log('开始录音');\n+    }, (error) => {\n+      console.log(`异常了,${error.name}:${error.message}`);\n+    });\n+  }\n+\n   return (\n     <div>\n       <ActionIcon color=\"cyan\" size=\"lg\" onClick={handleOpen}>\n         {\n"
                },
                {
                    "date": 1681611607576,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -144,8 +144,9 @@\n         });\n       }, 3000))\n     } else {\n       recorder.stop();\n+      \n     }\n \n     recorder.start().then(() => {\n       console.log('开始录音');\n"
                },
                {
                    "date": 1681611789757,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,9 @@\n /*\n  * @Author: Allen OYang\n  * @Email:  allenwill211@gmail.com\n  * @Date: 2023-04-14 16:09:48\n- * @LastEditTime: 2023-04-16 10:19:38\n+ * @LastEditTime: 2023-04-16 10:23:09\n  * @LastEditors: Allen OYang allenwill211@gmail.com\n  * @FilePath: /speak-gpt/src/components/ChatTextarea.tsx\n  */\n \n@@ -59,22 +59,22 @@\n   const record = useRef<Recorder>()\n   let { current: recorder } = useRef<Recorder>()\n   let { current: playTimer } = useRef<NodeJS.Timeout>()\n \n-  const handleOpen = async () => {\n-    record.current = new Recorder()\n+  // const handleOpen = async () => {\n+  //   record.current = new Recorder()\n \n-    if (isOpen) {\n-      console.log('play');\n-      record.current.play()\n-      setOpen(false);\n-    } else {\n-      record.current.start().then(() => {\n-        console.log('start record')\n-      })\n-      setOpen(true);\n-    }\n-  }\n+  //   if (isOpen) {\n+  //     console.log('play');\n+  //     record.current.play()\n+  //     setOpen(false);\n+  //   } else {\n+  //     record.current.start().then(() => {\n+  //       console.log('start record')\n+  //     })\n+  //     setOpen(true);\n+  //   }\n+  // }\n \n   const startRecord = async () => {\n \n     if (!recorder) {\n@@ -144,21 +144,25 @@\n         });\n       }, 3000))\n     } else {\n       recorder.stop();\n-      \n     }\n \n+    setOpen(true);\n     recorder.start().then(() => {\n       console.log('开始录音');\n     }, (error) => {\n       console.log(`异常了,${error.name}:${error.message}`);\n     });\n   }\n \n+  const playRecord = () => {\n+    setOpen(false);\n+  }\n+\n   return (\n     <div>\n-      <ActionIcon color=\"cyan\" size=\"lg\" onClick={handleOpen}>\n+      <ActionIcon color=\"cyan\" size=\"lg\" onClick={isOpen ? startRecord : handleOpen}>\n         {\n \n           isOpen ? <IconMicrophone2 size=\"1.625rem\" /> : <IconMicrophone2Off size=\"1.625rem\" />\n         }\n"
                },
                {
                    "date": 1681611796256,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -160,9 +160,9 @@\n   }\n \n   return (\n     <div>\n-      <ActionIcon color=\"cyan\" size=\"lg\" onClick={isOpen ? startRecord : handleOpen}>\n+      <ActionIcon color=\"cyan\" size=\"lg\" onClick={isOpen ? startRecord : playRecord}>\n         {\n \n           isOpen ? <IconMicrophone2 size=\"1.625rem\" /> : <IconMicrophone2Off size=\"1.625rem\" />\n         }\n"
                },
                {
                    "date": 1681611925435,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -19,13 +19,13 @@\n   IconSend,\n   IconMicrophone2Off\n } from '@tabler/icons-react';\n import { useRef, useState } from 'react';\n-import { MicrophoneRecord } from '@/utils/MicrophoneRecord'\n+import { MicrophoneRecord, Player } from '@/utils/MicrophoneRecord'\n import Recorder from 'js-audio-recorder';\n-import Player from 'js-audio-recorder/src/player/player';\n \n \n+\n const useStyles = createStyles((theme) => ({\n   container: {\n     display: 'flex',\n     alignItems: 'center',\n"
                },
                {
                    "date": 1681611959154,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -160,9 +160,9 @@\n   }\n \n   return (\n     <div>\n-      <ActionIcon color=\"cyan\" size=\"lg\" onClick={isOpen ? startRecord : playRecord}>\n+      <ActionIcon color=\"cyan\" size=\"lg\" onClick={isOpen ?  playRecord : startRecord}>\n         {\n \n           isOpen ? <IconMicrophone2 size=\"1.625rem\" /> : <IconMicrophone2Off size=\"1.625rem\" />\n         }\n"
                },
                {
                    "date": 1681612027992,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,9 @@\n /*\n  * @Author: Allen OYang\n  * @Email:  allenwill211@gmail.com\n  * @Date: 2023-04-14 16:09:48\n- * @LastEditTime: 2023-04-16 10:23:09\n+ * @LastEditTime: 2023-04-16 10:27:07\n  * @LastEditors: Allen OYang allenwill211@gmail.com\n  * @FilePath: /speak-gpt/src/components/ChatTextarea.tsx\n  */\n \n@@ -156,8 +156,10 @@\n   }\n \n   const playRecord = () => {\n     setOpen(false);\n+    recorder && recorder.play();\n+    console.log('播放录音');\n   }\n \n   return (\n     <div>\n"
                },
                {
                    "date": 1681612137133,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,9 @@\n /*\n  * @Author: Allen OYang\n  * @Email:  allenwill211@gmail.com\n  * @Date: 2023-04-14 16:09:48\n- * @LastEditTime: 2023-04-16 10:27:07\n+ * @LastEditTime: 2023-04-16 10:28:56\n  * @LastEditors: Allen OYang allenwill211@gmail.com\n  * @FilePath: /speak-gpt/src/components/ChatTextarea.tsx\n  */\n \n@@ -156,8 +156,9 @@\n   }\n \n   const playRecord = () => {\n     setOpen(false);\n+    console.log('停止录音', recorder);\n     recorder && recorder.play();\n     console.log('播放录音');\n   }\n \n"
                },
                {
                    "date": 1681612178366,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -75,9 +75,9 @@\n   //   }\n   // }\n \n   const startRecord = async () => {\n-\n+    console.log('recorder', recorder)\n     if (!recorder) {\n       recorder = new Recorder(config);\n \n       recorder.onprocess = function (duration) {\n"
                },
                {
                    "date": 1681612197333,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,9 @@\n /*\n  * @Author: Allen OYang\n  * @Email:  allenwill211@gmail.com\n  * @Date: 2023-04-14 16:09:48\n- * @LastEditTime: 2023-04-16 10:28:56\n+ * @LastEditTime: 2023-04-16 10:29:57\n  * @LastEditors: Allen OYang allenwill211@gmail.com\n  * @FilePath: /speak-gpt/src/components/ChatTextarea.tsx\n  */\n \n@@ -75,12 +75,14 @@\n   //   }\n   // }\n \n   const startRecord = async () => {\n-    console.log('recorder', recorder)\n+    console.log('recorder', !!recorder)\n     if (!recorder) {\n       recorder = new Recorder(config);\n \n+      console.log('recorder', recorder)\n+\n       recorder.onprocess = function (duration) {\n         // this.setState({\n         //     duration: duration.toFixed(5),\n         // });\n"
                },
                {
                    "date": 1681612272452,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,9 @@\n /*\n  * @Author: Allen OYang\n  * @Email:  allenwill211@gmail.com\n  * @Date: 2023-04-14 16:09:48\n- * @LastEditTime: 2023-04-16 10:29:57\n+ * @LastEditTime: 2023-04-16 10:31:12\n  * @LastEditors: Allen OYang allenwill211@gmail.com\n  * @FilePath: /speak-gpt/src/components/ChatTextarea.tsx\n  */\n \n@@ -145,9 +145,11 @@\n           Player.play(arraybuffer);\n         });\n       }, 3000))\n     } else {\n-      recorder.stop();\n+      console.log('play')\n+      // recorder.stop();\n+      recorder.play()\n     }\n \n     setOpen(true);\n     recorder.start().then(() => {\n"
                },
                {
                    "date": 1681612427213,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,9 @@\n /*\n  * @Author: Allen OYang\n  * @Email:  allenwill211@gmail.com\n  * @Date: 2023-04-14 16:09:48\n- * @LastEditTime: 2023-04-16 10:31:12\n+ * @LastEditTime: 2023-04-16 10:33:47\n  * @LastEditors: Allen OYang allenwill211@gmail.com\n  * @FilePath: /speak-gpt/src/components/ChatTextarea.tsx\n  */\n \n@@ -56,9 +56,9 @@\n export function ChatTextarea() {\n   const { classes, theme } = useStyles();\n   const [isOpen, setOpen] = useState(false);\n   const record = useRef<Recorder>()\n-  let { current: recorder } = useRef<Recorder>()\n+  let recorders = useRef<Recorder>()\n   let { current: playTimer } = useRef<NodeJS.Timeout>()\n \n   // const handleOpen = async () => {\n   //   record.current = new Recorder()\n@@ -75,9 +75,9 @@\n   //   }\n   // }\n \n   const startRecord = async () => {\n-    console.log('recorder', !!recorder)\n+    let recorder = recorders.current \n     if (!recorder) {\n       recorder = new Recorder(config);\n \n       console.log('recorder', recorder)\n@@ -160,10 +160,10 @@\n   }\n \n   const playRecord = () => {\n     setOpen(false);\n-    console.log('停止录音', recorder);\n-    recorder && recorder.play();\n+    console.log('停止录音', recorders.current );\n+    recorders.current  && recorders.current.play();\n     console.log('播放录音');\n   }\n \n   return (\n"
                },
                {
                    "date": 1681612466315,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -79,10 +79,12 @@\n     let recorder = recorders.current \n     if (!recorder) {\n       recorder = new Recorder(config);\n \n-      console.log('recorder', recorder)\n+      \n \n+      console.log('recorder', recorders.current)\n+\n       recorder.onprocess = function (duration) {\n         // this.setState({\n         //     duration: duration.toFixed(5),\n         // });\n"
                },
                {
                    "date": 1681612544436,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,9 @@\n /*\n  * @Author: Allen OYang\n  * @Email:  allenwill211@gmail.com\n  * @Date: 2023-04-14 16:09:48\n- * @LastEditTime: 2023-04-16 10:33:47\n+ * @LastEditTime: 2023-04-16 10:35:44\n  * @LastEditors: Allen OYang allenwill211@gmail.com\n  * @FilePath: /speak-gpt/src/components/ChatTextarea.tsx\n  */\n \n@@ -56,9 +56,9 @@\n export function ChatTextarea() {\n   const { classes, theme } = useStyles();\n   const [isOpen, setOpen] = useState(false);\n   const record = useRef<Recorder>()\n-  let recorders = useRef<Recorder>()\n+  let recorder = useRef<Recorder>()\n   let { current: playTimer } = useRef<NodeJS.Timeout>()\n \n   // const handleOpen = async () => {\n   //   record.current = new Recorder()\n@@ -75,57 +75,56 @@\n   //   }\n   // }\n \n   const startRecord = async () => {\n-    let recorder = recorders.current \n-    if (!recorder) {\n-      recorder = new Recorder(config);\n+    if (!recorder.current) {\n+      recorder.current = new Recorder(config);\n \n       \n \n-      console.log('recorder', recorders.current)\n+      console.log('recorders.current', recorder.current)\n \n-      recorder.onprocess = function (duration) {\n+      recorder.current.onprocess = function (duration) {\n         // this.setState({\n         //     duration: duration.toFixed(5),\n         // });\n         // 推荐使用 onprogress\n       }\n \n-      recorder.onprogress = (params) => {\n+      recorder.current.onprogress = (params) => {\n         // console.log(recorder.duration);\n         // console.log(recorder.fileSize);\n         // 此处控制数据的收集频率\n         if (config.compiling) {\n           console.log('音频总数据：', params.data);\n         }\n       }\n \n-      recorder.onplay = () => {\n+      recorder.current.onplay = () => {\n         console.log('%c回调监听，开始播放音频', 'color: #2196f3')\n       }\n-      recorder.onpauseplay = () => {\n+      recorder.current.onpauseplay = () => {\n         console.log('%c回调监听，暂停播放音频', 'color: #2196f3')\n       }\n-      recorder.onresumeplay = () => {\n+      recorder.current.onresumeplay = () => {\n         console.log('%c回调监听，恢复播放音频', 'color: #2196f3')\n       }\n-      recorder.onstopplay = () => {\n+      recorder.current.onstopplay = () => {\n         console.log('%c回调监听，停止播放音频', 'color: #2196f3')\n       }\n-      recorder.onplayend = () => {\n+      recorder.current.onplayend = () => {\n         console.log('%c回调监听，音频已经完成播放', 'color: #2196f3')\n         // 播放结束后，停止绘制canavs\n         // this.stopDrawPlay();\n       }\n \n       // 定时获取录音的数据并播放\n       config.compiling && (playTimer = setInterval(() => {\n-        if (!recorder) {\n+        if (!recorder.current) {\n           return;\n         }\n \n-        let newData = recorder.getNextData();\n+        let newData = recorder.current.getNextData();\n         if (!newData.length) {\n           return;\n         }\n         let byteLength = newData[0].byteLength\n@@ -149,23 +148,23 @@\n       }, 3000))\n     } else {\n       console.log('play')\n       // recorder.stop();\n-      recorder.play()\n+      recorder.current.play()\n     }\n \n     setOpen(true);\n-    recorder.start().then(() => {\n+    recorder.current.start().then(() => {\n       console.log('开始录音');\n     }, (error) => {\n       console.log(`异常了,${error.name}:${error.message}`);\n     });\n   }\n \n   const playRecord = () => {\n     setOpen(false);\n-    console.log('停止录音', recorders.current );\n-    recorders.current  && recorders.current.play();\n+    console.log('停止录音', recorder.current );\n+    recorder.current  && recorder.current.play();\n     console.log('播放录音');\n   }\n \n   return (\n"
                },
                {
                    "date": 1681617772454,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -18,14 +18,13 @@\n   IconMicrophone2,\n   IconSend,\n   IconMicrophone2Off\n } from '@tabler/icons-react';\n-import { useRef, useState } from 'react';\n+import { useEffect, useRef, useState } from 'react';\n import { MicrophoneRecord, Player } from '@/utils/MicrophoneRecord'\n-import Recorder from 'js-audio-recorder';\n+import { Record } from '@/core/Record'\n \n \n-\n const useStyles = createStyles((theme) => ({\n   container: {\n     display: 'flex',\n     alignItems: 'center',\n@@ -45,132 +44,34 @@\n     padding: `${theme.spacing.xs} ${theme.spacing.sm}`\n   }\n }));\n \n-const config = {\n-  sampleBits: 16,\n-  sampleRate: 16000,\n-  numChannels: 1,\n-  compiling: false,       // 是否开启边录音边转化（后期改用web worker）\n-}\n \n+\n export function ChatTextarea() {\n   const { classes, theme } = useStyles();\n   const [isOpen, setOpen] = useState(false);\n-  const record = useRef<Recorder>()\n-  let recorder = useRef<Recorder>()\n-  let { current: playTimer } = useRef<NodeJS.Timeout>()\n+  const record = useRef<Record>()\n+  let playTimer = useRef<NodeJS.Timeout>();\n \n-  // const handleOpen = async () => {\n-  //   record.current = new Recorder()\n+  useEffect(() => {\n+    record.current = new Record()\n+  }, [])\n \n-  //   if (isOpen) {\n-  //     console.log('play');\n-  //     record.current.play()\n-  //     setOpen(false);\n-  //   } else {\n-  //     record.current.start().then(() => {\n-  //       console.log('start record')\n-  //     })\n-  //     setOpen(true);\n-  //   }\n-  // }\n-\n   const startRecord = async () => {\n-    if (!recorder.current) {\n-      recorder.current = new Recorder(config);\n-\n-      \n-\n-      console.log('recorders.current', recorder.current)\n-\n-      recorder.current.onprocess = function (duration) {\n-        // this.setState({\n-        //     duration: duration.toFixed(5),\n-        // });\n-        // 推荐使用 onprogress\n-      }\n-\n-      recorder.current.onprogress = (params) => {\n-        // console.log(recorder.duration);\n-        // console.log(recorder.fileSize);\n-        // 此处控制数据的收集频率\n-        if (config.compiling) {\n-          console.log('音频总数据：', params.data);\n-        }\n-      }\n-\n-      recorder.current.onplay = () => {\n-        console.log('%c回调监听，开始播放音频', 'color: #2196f3')\n-      }\n-      recorder.current.onpauseplay = () => {\n-        console.log('%c回调监听，暂停播放音频', 'color: #2196f3')\n-      }\n-      recorder.current.onresumeplay = () => {\n-        console.log('%c回调监听，恢复播放音频', 'color: #2196f3')\n-      }\n-      recorder.current.onstopplay = () => {\n-        console.log('%c回调监听，停止播放音频', 'color: #2196f3')\n-      }\n-      recorder.current.onplayend = () => {\n-        console.log('%c回调监听，音频已经完成播放', 'color: #2196f3')\n-        // 播放结束后，停止绘制canavs\n-        // this.stopDrawPlay();\n-      }\n-\n-      // 定时获取录音的数据并播放\n-      config.compiling && (playTimer = setInterval(() => {\n-        if (!recorder.current) {\n-          return;\n-        }\n-\n-        let newData = recorder.current.getNextData();\n-        if (!newData.length) {\n-          return;\n-        }\n-        let byteLength = newData[0].byteLength\n-        let buffer = new ArrayBuffer(newData.length * byteLength)\n-        let dataView = new DataView(buffer)\n-\n-        // 数据合并\n-        for (let i = 0, iLen = newData.length; i < iLen; ++i) {\n-          for (let j = 0, jLen = newData[i].byteLength; j < jLen; ++j) {\n-            dataView.setInt8(i * byteLength + j, newData[i].getInt8(j))\n-          }\n-        }\n-\n-        // 将录音数据转成WAV格式，并播放\n-        let a = Recorder.encodeWAV(dataView, config.sampleRate, config.sampleRate, config.numChannels, config.sampleBits, false)\n-        let blob: any = new Blob([a], { type: 'audio/wav' });\n-\n-        blob.arrayBuffer().then((arraybuffer: any) => {\n-          Player.play(arraybuffer);\n-        });\n-      }, 3000))\n-    } else {\n-      console.log('play')\n-      // recorder.stop();\n-      recorder.current.play()\n-    }\n-\n-    setOpen(true);\n-    recorder.current.start().then(() => {\n-      console.log('开始录音');\n-    }, (error) => {\n-      console.log(`异常了,${error.name}:${error.message}`);\n-    });\n+    record.current?.start()\n   }\n \n   const playRecord = () => {\n     setOpen(false);\n-    console.log('停止录音', recorder.current );\n-    recorder.current  && recorder.current.play();\n+    console.log('停止录音', recorder.current);\n+    recorder.current && recorder.current.play();\n     console.log('播放录音');\n   }\n \n   return (\n     <div>\n-      <ActionIcon color=\"cyan\" size=\"lg\" onClick={isOpen ?  playRecord : startRecord}>\n+      <ActionIcon color=\"cyan\" size=\"lg\" onClick={isOpen ? playRecord : startRecord}>\n         {\n \n           isOpen ? <IconMicrophone2 size=\"1.625rem\" /> : <IconMicrophone2Off size=\"1.625rem\" />\n         }\n"
                },
                {
                    "date": 1681618001505,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,9 @@\n /*\n  * @Author: Allen OYang\n  * @Email:  allenwill211@gmail.com\n  * @Date: 2023-04-14 16:09:48\n- * @LastEditTime: 2023-04-16 10:35:44\n+ * @LastEditTime: 2023-04-16 12:06:40\n  * @LastEditors: Allen OYang allenwill211@gmail.com\n  * @FilePath: /speak-gpt/src/components/ChatTextarea.tsx\n  */\n \n@@ -57,16 +57,23 @@\n     record.current = new Record()\n   }, [])\n \n   const startRecord = async () => {\n-    record.current?.start()\n+    try {\n+      record.current?.start()\n+      setOpen(true);\n+    } catch (error) { \n+      console.log('error', error);\n+    }\n   }\n \n   const playRecord = () => {\n-    setOpen(false);\n-    console.log('停止录音', recorder.current);\n-    recorder.current && recorder.current.play();\n-    console.log('播放录音');\n+    try {\n+      record.current?.play()\n+      setOpen(false);\n+    } catch (error) { \n+      console.log('error', error);\n+    }\n   }\n \n   return (\n     <div>\n"
                },
                {
                    "date": 1681618031169,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -58,18 +58,18 @@\n   }, [])\n \n   const startRecord = async () => {\n     try {\n-      record.current?.start()\n+      await record.current?.start()\n       setOpen(true);\n     } catch (error) { \n       console.log('error', error);\n     }\n   }\n \n   const playRecord = () => {\n     try {\n-      record.current?.play()\n+      await record.current?.play()\n       setOpen(false);\n     } catch (error) { \n       console.log('error', error);\n     }\n"
                },
                {
                    "date": 1681618047260,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -60,18 +60,18 @@\n   const startRecord = async () => {\n     try {\n       await record.current?.start()\n       setOpen(true);\n-    } catch (error) { \n+    } catch (error) {\n       console.log('error', error);\n     }\n   }\n \n-  const playRecord = () => {\n+  const playRecord = async () => {\n     try {\n       await record.current?.play()\n       setOpen(false);\n-    } catch (error) { \n+    } catch (error) {\n       console.log('error', error);\n     }\n   }\n \n"
                },
                {
                    "date": 1681618078750,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,9 @@\n /*\n  * @Author: Allen OYang\n  * @Email:  allenwill211@gmail.com\n  * @Date: 2023-04-14 16:09:48\n- * @LastEditTime: 2023-04-16 12:06:40\n+ * @LastEditTime: 2023-04-16 12:07:57\n  * @LastEditors: Allen OYang allenwill211@gmail.com\n  * @FilePath: /speak-gpt/src/components/ChatTextarea.tsx\n  */\n \n@@ -19,9 +19,8 @@\n   IconSend,\n   IconMicrophone2Off\n } from '@tabler/icons-react';\n import { useEffect, useRef, useState } from 'react';\n-import { MicrophoneRecord, Player } from '@/utils/MicrophoneRecord'\n import { Record } from '@/core/Record'\n \n \n const useStyles = createStyles((theme) => ({\n"
                },
                {
                    "date": 1681618438530,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,9 @@\n /*\n  * @Author: Allen OYang\n  * @Email:  allenwill211@gmail.com\n  * @Date: 2023-04-14 16:09:48\n- * @LastEditTime: 2023-04-16 12:07:57\n+ * @LastEditTime: 2023-04-16 12:13:58\n  * @LastEditors: Allen OYang allenwill211@gmail.com\n  * @FilePath: /speak-gpt/src/components/ChatTextarea.tsx\n  */\n \n@@ -49,9 +49,8 @@\n export function ChatTextarea() {\n   const { classes, theme } = useStyles();\n   const [isOpen, setOpen] = useState(false);\n   const record = useRef<Record>()\n-  let playTimer = useRef<NodeJS.Timeout>();\n \n   useEffect(() => {\n     record.current = new Record()\n   }, [])\n@@ -77,9 +76,8 @@\n   return (\n     <div>\n       <ActionIcon color=\"cyan\" size=\"lg\" onClick={isOpen ? playRecord : startRecord}>\n         {\n-\n           isOpen ? <IconMicrophone2 size=\"1.625rem\" /> : <IconMicrophone2Off size=\"1.625rem\" />\n         }\n       </ActionIcon>\n \n"
                },
                {
                    "date": 1681619394842,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,9 @@\n /*\n  * @Author: Allen OYang\n  * @Email:  allenwill211@gmail.com\n  * @Date: 2023-04-14 16:09:48\n- * @LastEditTime: 2023-04-16 12:13:58\n+ * @LastEditTime: 2023-04-16 12:29:54\n  * @LastEditors: Allen OYang allenwill211@gmail.com\n  * @FilePath: /speak-gpt/src/components/ChatTextarea.tsx\n  */\n \n@@ -11,8 +11,9 @@\n   Textarea,\n   ActionIcon,\n   Button,\n   createStyles,\n+  Select\n } from '@mantine/core';\n \n import {\n   IconMicrophone2,\n@@ -74,14 +75,27 @@\n   }\n \n   return (\n     <div>\n-      <ActionIcon color=\"cyan\" size=\"lg\" onClick={isOpen ? playRecord : startRecord}>\n-        {\n-          isOpen ? <IconMicrophone2 size=\"1.625rem\" /> : <IconMicrophone2Off size=\"1.625rem\" />\n-        }\n-      </ActionIcon>\n+      <div>\n+        <ActionIcon color=\"cyan\" size=\"lg\" onClick={isOpen ? playRecord : startRecord}>\n+          {\n+            isOpen ? <IconMicrophone2 size=\"1.625rem\" /> : <IconMicrophone2Off size=\"1.625rem\" />\n+          }\n+        </ActionIcon>\n \n+        <Select\n+          label=\"Your favorite framework/library\"\n+          placeholder=\"Pick one\"\n+          data={[\n+            { value: 'react', label: 'React' },\n+            { value: 'ng', label: 'Angular' },\n+            { value: 'svelte', label: 'Svelte' },\n+            { value: 'vue', label: 'Vue' },\n+          ]}\n+        />\n+      </div>\n+\n       <div className={classes.container}>\n         <Textarea\n           className={classes.textarea}\n           placeholder=\"Your question\"\n"
                },
                {
                    "date": 1681619525682,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,9 @@\n /*\n  * @Author: Allen OYang\n  * @Email:  allenwill211@gmail.com\n  * @Date: 2023-04-14 16:09:48\n- * @LastEditTime: 2023-04-16 12:29:54\n+ * @LastEditTime: 2023-04-16 12:32:05\n  * @LastEditors: Allen OYang allenwill211@gmail.com\n  * @FilePath: /speak-gpt/src/components/ChatTextarea.tsx\n  */\n \n@@ -83,15 +83,13 @@\n           }\n         </ActionIcon>\n \n         <Select\n-          label=\"Your favorite framework/library\"\n+          label=\"Select transform \"\n           placeholder=\"Pick one\"\n+          defaultValue=\"aliyun\"\n           data={[\n-            { value: 'react', label: 'React' },\n-            { value: 'ng', label: 'Angular' },\n-            { value: 'svelte', label: 'Svelte' },\n-            { value: 'vue', label: 'Vue' },\n+            { value: 'aliyun', label: 'aliyun' },\n           ]}\n         />\n       </div>\n \n"
                },
                {
                    "date": 1681619537237,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -87,9 +87,9 @@\n           label=\"Select transform \"\n           placeholder=\"Pick one\"\n           defaultValue=\"aliyun\"\n           data={[\n-            { value: 'aliyun', label: 'aliyun' },\n+            { value: 'aliyun', label: 'Aliyun' },\n           ]}\n         />\n       </div>\n \n"
                },
                {
                    "date": 1681619613356,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,9 @@\n /*\n  * @Author: Allen OYang\n  * @Email:  allenwill211@gmail.com\n  * @Date: 2023-04-14 16:09:48\n- * @LastEditTime: 2023-04-16 12:32:05\n+ * @LastEditTime: 2023-04-16 12:33:33\n  * @LastEditors: Allen OYang allenwill211@gmail.com\n  * @FilePath: /speak-gpt/src/components/ChatTextarea.tsx\n  */\n \n@@ -11,9 +11,10 @@\n   Textarea,\n   ActionIcon,\n   Button,\n   createStyles,\n-  Select\n+  Select,\n+  Grid\n } from '@mantine/core';\n \n import {\n   IconMicrophone2,\n@@ -75,24 +76,29 @@\n   }\n \n   return (\n     <div>\n-      <div>\n-        <ActionIcon color=\"cyan\" size=\"lg\" onClick={isOpen ? playRecord : startRecord}>\n-          {\n-            isOpen ? <IconMicrophone2 size=\"1.625rem\" /> : <IconMicrophone2Off size=\"1.625rem\" />\n-          }\n-        </ActionIcon>\n+      <Grid>\n+        <Grid.Col span={4}>\n+          <ActionIcon color=\"cyan\" size=\"lg\" onClick={isOpen ? playRecord : startRecord}>\n+            {\n+              isOpen ? <IconMicrophone2 size=\"1.625rem\" /> : <IconMicrophone2Off size=\"1.625rem\" />\n+            }\n+          </ActionIcon>\n+        </Grid.Col>\n \n-        <Select\n-          label=\"Select transform \"\n-          placeholder=\"Pick one\"\n-          defaultValue=\"aliyun\"\n-          data={[\n-            { value: 'aliyun', label: 'Aliyun' },\n-          ]}\n-        />\n-      </div>\n+        <Grid.Col span={4}>\n+          <Select\n+            label=\"Select transform \"\n+            placeholder=\"Pick one\"\n+            defaultValue=\"aliyun\"\n+            data={[\n+              { value: 'aliyun', label: 'Aliyun' },\n+            ]}\n+          />\n+        </Grid.Col>\n+        \n+      </Grid>\n \n       <div className={classes.container}>\n         <Textarea\n           className={classes.textarea}\n"
                },
                {
                    "date": 1681619634022,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -77,17 +77,17 @@\n \n   return (\n     <div>\n       <Grid>\n-        <Grid.Col span={4}>\n+        <Grid.Col span={3}>\n           <ActionIcon color=\"cyan\" size=\"lg\" onClick={isOpen ? playRecord : startRecord}>\n             {\n               isOpen ? <IconMicrophone2 size=\"1.625rem\" /> : <IconMicrophone2Off size=\"1.625rem\" />\n             }\n           </ActionIcon>\n         </Grid.Col>\n \n-        <Grid.Col span={4}>\n+        <Grid.Col span={3} offset={3}>\n           <Select\n             label=\"Select transform \"\n             placeholder=\"Pick one\"\n             defaultValue=\"aliyun\"\n@@ -95,9 +95,8 @@\n               { value: 'aliyun', label: 'Aliyun' },\n             ]}\n           />\n         </Grid.Col>\n-        \n       </Grid>\n \n       <div className={classes.container}>\n         <Textarea\n"
                },
                {
                    "date": 1681619743883,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,9 @@\n /*\n  * @Author: Allen OYang\n  * @Email:  allenwill211@gmail.com\n  * @Date: 2023-04-14 16:09:48\n- * @LastEditTime: 2023-04-16 12:33:33\n+ * @LastEditTime: 2023-04-16 12:35:43\n  * @LastEditors: Allen OYang allenwill211@gmail.com\n  * @FilePath: /speak-gpt/src/components/ChatTextarea.tsx\n  */\n \n@@ -12,9 +12,9 @@\n   ActionIcon,\n   Button,\n   createStyles,\n   Select,\n-  Grid\n+  Flex\n } from '@mantine/core';\n \n import {\n   IconMicrophone2,\n@@ -76,29 +76,34 @@\n   }\n \n   return (\n     <div>\n-      <Grid>\n-        <Grid.Col span={3}>\n-          <ActionIcon color=\"cyan\" size=\"lg\" onClick={isOpen ? playRecord : startRecord}>\n-            {\n-              isOpen ? <IconMicrophone2 size=\"1.625rem\" /> : <IconMicrophone2Off size=\"1.625rem\" />\n-            }\n-          </ActionIcon>\n-        </Grid.Col>\n+      <Flex\n+        mih={50}\n+        bg=\"rgba(0, 0, 0, .3)\"\n+        gap=\"md\"\n+        justify=\"between\"\n+        align=\"flex-start\"\n+        direction=\"row\"\n+        wrap=\"wrap\"\n+      >\n+        <ActionIcon color=\"cyan\" size=\"lg\" onClick={isOpen ? playRecord : startRecord}>\n+          {\n+            isOpen ? <IconMicrophone2 size=\"1.625rem\" /> : <IconMicrophone2Off size=\"1.625rem\" />\n+          }\n+        </ActionIcon>\n \n-        <Grid.Col span={3} offset={3}>\n-          <Select\n-            label=\"Select transform \"\n-            placeholder=\"Pick one\"\n-            defaultValue=\"aliyun\"\n-            data={[\n-              { value: 'aliyun', label: 'Aliyun' },\n-            ]}\n-          />\n-        </Grid.Col>\n-      </Grid>\n \n+        <Select\n+          label=\"Select transform \"\n+          placeholder=\"Pick one\"\n+          defaultValue=\"aliyun\"\n+          data={[\n+            { value: 'aliyun', label: 'Aliyun' },\n+          ]}\n+        />\n+      </Flex>\n+\n       <div className={classes.container}>\n         <Textarea\n           className={classes.textarea}\n           placeholder=\"Your question\"\n"
                },
                {
                    "date": 1681619779381,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -80,9 +80,9 @@\n       <Flex\n         mih={50}\n         bg=\"rgba(0, 0, 0, .3)\"\n         gap=\"md\"\n-        justify=\"between\"\n+        justify=\"space-between\"\n         align=\"flex-start\"\n         direction=\"row\"\n         wrap=\"wrap\"\n       >\n"
                },
                {
                    "date": 1681619788122,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -81,9 +81,9 @@\n         mih={50}\n         bg=\"rgba(0, 0, 0, .3)\"\n         gap=\"md\"\n         justify=\"space-between\"\n-        align=\"flex-start\"\n+        align=\"center\"\n         direction=\"row\"\n         wrap=\"wrap\"\n       >\n         <ActionIcon color=\"cyan\" size=\"lg\" onClick={isOpen ? playRecord : startRecord}>\n"
                },
                {
                    "date": 1681619834111,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,9 @@\n /*\n  * @Author: Allen OYang\n  * @Email:  allenwill211@gmail.com\n  * @Date: 2023-04-14 16:09:48\n- * @LastEditTime: 2023-04-16 12:35:43\n+ * @LastEditTime: 2023-04-16 12:37:13\n  * @LastEditors: Allen OYang allenwill211@gmail.com\n  * @FilePath: /speak-gpt/src/components/ChatTextarea.tsx\n  */\n \n@@ -78,9 +78,8 @@\n   return (\n     <div>\n       <Flex\n         mih={50}\n-        bg=\"rgba(0, 0, 0, .3)\"\n         gap=\"md\"\n         justify=\"space-between\"\n         align=\"center\"\n         direction=\"row\"\n"
                },
                {
                    "date": 1681619878297,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -42,8 +42,12 @@\n     justifyContent: 'center',\n     position: 'absolute',\n     right: 0,\n     padding: `${theme.spacing.xs} ${theme.spacing.sm}`\n+  },\n+\n+  utilsContainer: {\n+    padding: `${theme.spacing.xs} ${theme.spacing.sm}`\n   }\n }));\n \n \n@@ -77,8 +81,9 @@\n \n   return (\n     <div>\n       <Flex\n+        className={classes.utilsContainer}\n         mih={50}\n         gap=\"md\"\n         justify=\"space-between\"\n         align=\"center\"\n"
                },
                {
                    "date": 1681619884191,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -97,9 +97,8 @@\n         </ActionIcon>\n \n \n         <Select\n-          label=\"Select transform \"\n           placeholder=\"Pick one\"\n           defaultValue=\"aliyun\"\n           data={[\n             { value: 'aliyun', label: 'Aliyun' },\n"
                },
                {
                    "date": 1681619926373,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,9 @@\n /*\n  * @Author: Allen OYang\n  * @Email:  allenwill211@gmail.com\n  * @Date: 2023-04-14 16:09:48\n- * @LastEditTime: 2023-04-16 12:37:13\n+ * @LastEditTime: 2023-04-16 12:38:46\n  * @LastEditors: Allen OYang allenwill211@gmail.com\n  * @FilePath: /speak-gpt/src/components/ChatTextarea.tsx\n  */\n \n@@ -45,9 +45,9 @@\n     padding: `${theme.spacing.xs} ${theme.spacing.sm}`\n   },\n \n   utilsContainer: {\n-    padding: `${theme.spacing.xs} ${theme.spacing.sm}`\n+    paddingLeft: `${theme.spacing.xs} ${theme.spacing.sm}`\n   }\n }));\n \n \n"
                },
                {
                    "date": 1681632547234,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,9 @@\n /*\n  * @Author: Allen OYang\n  * @Email:  allenwill211@gmail.com\n  * @Date: 2023-04-14 16:09:48\n- * @LastEditTime: 2023-04-16 12:38:46\n+ * @LastEditTime: 2023-04-16 16:09:06\n  * @LastEditors: Allen OYang allenwill211@gmail.com\n  * @FilePath: /speak-gpt/src/components/ChatTextarea.tsx\n  */\n \n@@ -62,18 +62,18 @@\n   }, [])\n \n   const startRecord = async () => {\n     try {\n-      await record.current?.start()\n+      await record.current?.startRecord()\n       setOpen(true);\n     } catch (error) {\n       console.log('error', error);\n     }\n   }\n \n   const playRecord = async () => {\n     try {\n-      await record.current?.play()\n+      await record.current?.stopRecord()\n       setOpen(false);\n     } catch (error) {\n       console.log('error', error);\n     }\n"
                },
                {
                    "date": 1681633222804,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,9 @@\n /*\n  * @Author: Allen OYang\n  * @Email:  allenwill211@gmail.com\n  * @Date: 2023-04-14 16:09:48\n- * @LastEditTime: 2023-04-16 16:09:06\n+ * @LastEditTime: 2023-04-16 16:20:21\n  * @LastEditors: Allen OYang allenwill211@gmail.com\n  * @FilePath: /speak-gpt/src/components/ChatTextarea.tsx\n  */\n \n@@ -57,8 +57,9 @@\n   const [isOpen, setOpen] = useState(false);\n   const record = useRef<Record>()\n \n   useEffect(() => {\n+    console.log('record.current>>>', record.current)\n     record.current = new Record()\n   }, [])\n \n   const startRecord = async () => {\n"
                },
                {
                    "date": 1681633477891,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,9 @@\n /*\n  * @Author: Allen OYang\n  * @Email:  allenwill211@gmail.com\n  * @Date: 2023-04-14 16:09:48\n- * @LastEditTime: 2023-04-16 16:20:21\n+ * @LastEditTime: 2023-04-16 16:24:37\n  * @LastEditors: Allen OYang allenwill211@gmail.com\n  * @FilePath: /speak-gpt/src/components/ChatTextarea.tsx\n  */\n \n@@ -58,9 +58,12 @@\n   const record = useRef<Record>()\n \n   useEffect(() => {\n     console.log('record.current>>>', record.current)\n-    record.current = new Record()\n+    if (!record.current) {\n+      record.current = new Record()\n+    }\n+\n   }, [])\n \n   const startRecord = async () => {\n     try {\n"
                },
                {
                    "date": 1681634279042,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,125 @@\n+/*\n+ * @Author: Allen OYang\n+ * @Email:  allenwill211@gmail.com\n+ * @Date: 2023-04-14 16:09:48\n+ * @LastEditTime: 2023-04-16 16:24:37\n+ * @LastEditors: Allen OYang allenwill211@gmail.com\n+ * @FilePath: /speak-gpt/src/components/ChatTextarea.tsx\n+ */\n+\n+import {\n+  Textarea,\n+  ActionIcon,\n+  Button,\n+  createStyles,\n+  Select,\n+  Flex\n+} from '@mantine/core';\n+\n+import {\n+  IconMicrophone2,\n+  IconSend,\n+  IconMicrophone2Off\n+} from '@tabler/icons-react';\n+import { useEffect, useRef, useState } from 'react';\n+import { Record } from '@/core/Record'\n+\n+\n+const useStyles = createStyles((theme) => ({\n+  container: {\n+    display: 'flex',\n+    alignItems: 'center',\n+    justifyContent: 'space-between',\n+    position: 'relative',\n+  },\n+  textarea: {\n+    flex: 1,\n+  },\n+  iconContainer: {\n+    height: '100%',\n+    display: 'flex',\n+    alignItems: 'center',\n+    justifyContent: 'center',\n+    position: 'absolute',\n+    right: 0,\n+    padding: `${theme.spacing.xs} ${theme.spacing.sm}`\n+  },\n+\n+  utilsContainer: {\n+    paddingLeft: `${theme.spacing.xs} ${theme.spacing.sm}`\n+  }\n+}));\n+\n+\n+\n+export function ChatTextarea() {\n+  const { classes, theme } = useStyles();\n+  const [isOpen, setOpen] = useState(false);\n+  const record = useRef<Record>()\n+\n+  useEffect(() => {\n+    if (!record.current) {\n+      record.current = new Record()\n+    }\n+  }, [])\n+\n+  const startRecord = async () => {\n+    try {\n+      await record.current?.startRecord()\n+      setOpen(true);\n+    } catch (error) {\n+      console.log('error', error);\n+    }\n+  }\n+\n+  const playRecord = async () => {\n+    try {\n+      await record.current?.stopRecord()\n+      setOpen(false);\n+    } catch (error) {\n+      console.log('error', error);\n+    }\n+  }\n+\n+  return (\n+    <div>\n+      <Flex\n+        className={classes.utilsContainer}\n+        mih={50}\n+        gap=\"md\"\n+        justify=\"space-between\"\n+        align=\"center\"\n+        direction=\"row\"\n+        wrap=\"wrap\"\n+      >\n+        <ActionIcon color=\"cyan\" size=\"lg\" onClick={isOpen ? playRecord : startRecord}>\n+          {\n+            isOpen ? <IconMicrophone2 size=\"1.625rem\" /> : <IconMicrophone2Off size=\"1.625rem\" />\n+          }\n+        </ActionIcon>\n+\n+\n+        <Select\n+          placeholder=\"Pick one\"\n+          defaultValue=\"aliyun\"\n+          data={[\n+            { value: 'aliyun', label: 'Aliyun' },\n+          ]}\n+        />\n+      </Flex>\n+\n+      <div className={classes.container}>\n+        <Textarea\n+          className={classes.textarea}\n+          placeholder=\"Your question\"\n+          withAsterisk\n+        />\n+        <div className={classes.iconContainer}>\n+          <ActionIcon color=\"cyan\" size=\"lg\">\n+            <IconSend size=\"1.625rem\" />\n+          </ActionIcon>\n+        </div>\n+      </div>\n+    </div>\n+  )\n+}\n\\ No newline at end of file\n"
                },
                {
                    "date": 1681698963592,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,9 @@\n /*\n  * @Author: Allen OYang\n  * @Email:  allenwill211@gmail.com\n  * @Date: 2023-04-14 16:09:48\n- * @LastEditTime: 2023-04-16 16:24:37\n+ * @LastEditTime: 2023-04-17 10:36:03\n  * @LastEditors: Allen OYang allenwill211@gmail.com\n  * @FilePath: /speak-gpt/src/components/ChatTextarea.tsx\n  */\n \n@@ -21,9 +21,9 @@\n   IconSend,\n   IconMicrophone2Off\n } from '@tabler/icons-react';\n import { useEffect, useRef, useState } from 'react';\n-import { Record } from '@/core/Record'\n+import { Record } from '@/core/Record/Record'\n \n \n const useStyles = createStyles((theme) => ({\n   container: {\n@@ -121,132 +121,5 @@\n         </div>\n       </div>\n     </div>\n   )\n-}\n-/*\n- * @Author: Allen OYang\n- * @Email:  allenwill211@gmail.com\n- * @Date: 2023-04-14 16:09:48\n- * @LastEditTime: 2023-04-16 16:24:37\n- * @LastEditors: Allen OYang allenwill211@gmail.com\n- * @FilePath: /speak-gpt/src/components/ChatTextarea.tsx\n- */\n-\n-import {\n-  Textarea,\n-  ActionIcon,\n-  Button,\n-  createStyles,\n-  Select,\n-  Flex\n-} from '@mantine/core';\n-\n-import {\n-  IconMicrophone2,\n-  IconSend,\n-  IconMicrophone2Off\n-} from '@tabler/icons-react';\n-import { useEffect, useRef, useState } from 'react';\n-import { Record } from '@/core/Record'\n-\n-\n-const useStyles = createStyles((theme) => ({\n-  container: {\n-    display: 'flex',\n-    alignItems: 'center',\n-    justifyContent: 'space-between',\n-    position: 'relative',\n-  },\n-  textarea: {\n-    flex: 1,\n-  },\n-  iconContainer: {\n-    height: '100%',\n-    display: 'flex',\n-    alignItems: 'center',\n-    justifyContent: 'center',\n-    position: 'absolute',\n-    right: 0,\n-    padding: `${theme.spacing.xs} ${theme.spacing.sm}`\n-  },\n-\n-  utilsContainer: {\n-    paddingLeft: `${theme.spacing.xs} ${theme.spacing.sm}`\n-  }\n-}));\n-\n-\n-\n-export function ChatTextarea() {\n-  const { classes, theme } = useStyles();\n-  const [isOpen, setOpen] = useState(false);\n-  const record = useRef<Record>()\n-\n-  useEffect(() => {\n-    console.log('record.current>>>', record.current)\n-    if (!record.current) {\n-      record.current = new Record()\n-    }\n-\n-  }, [])\n-\n-  const startRecord = async () => {\n-    try {\n-      await record.current?.startRecord()\n-      setOpen(true);\n-    } catch (error) {\n-      console.log('error', error);\n-    }\n-  }\n-\n-  const playRecord = async () => {\n-    try {\n-      await record.current?.stopRecord()\n-      setOpen(false);\n-    } catch (error) {\n-      console.log('error', error);\n-    }\n-  }\n-\n-  return (\n-    <div>\n-      <Flex\n-        className={classes.utilsContainer}\n-        mih={50}\n-        gap=\"md\"\n-        justify=\"space-between\"\n-        align=\"center\"\n-        direction=\"row\"\n-        wrap=\"wrap\"\n-      >\n-        <ActionIcon color=\"cyan\" size=\"lg\" onClick={isOpen ? playRecord : startRecord}>\n-          {\n-            isOpen ? <IconMicrophone2 size=\"1.625rem\" /> : <IconMicrophone2Off size=\"1.625rem\" />\n-          }\n-        </ActionIcon>\n-\n-\n-        <Select\n-          placeholder=\"Pick one\"\n-          defaultValue=\"aliyun\"\n-          data={[\n-            { value: 'aliyun', label: 'Aliyun' },\n-          ]}\n-        />\n-      </Flex>\n-\n-      <div className={classes.container}>\n-        <Textarea\n-          className={classes.textarea}\n-          placeholder=\"Your question\"\n-          withAsterisk\n-        />\n-        <div className={classes.iconContainer}>\n-          <ActionIcon color=\"cyan\" size=\"lg\">\n-            <IconSend size=\"1.625rem\" />\n-          </ActionIcon>\n-        </div>\n-      </div>\n-    </div>\n-  )\n }\n\\ No newline at end of file\n"
                },
                {
                    "date": 1681704593454,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -22,8 +22,9 @@\n   IconMicrophone2Off\n } from '@tabler/icons-react';\n import { useEffect, useRef, useState } from 'react';\n import { Record } from '@/core/Record/Record'\n+import {TencetCloudRecord} from '@/core/TencetcloudRecord'\n \n \n const useStyles = createStyles((theme) => ({\n   container: {\n@@ -55,33 +56,54 @@\n export function ChatTextarea() {\n   const { classes, theme } = useStyles();\n   const [isOpen, setOpen] = useState(false);\n   const record = useRef<Record>()\n+  const tcr = useRef<TencetCloudRecord>()\n \n   useEffect(() => {\n     if (!record.current) {\n       record.current = new Record()\n     }\n+\n+    if (!tcr.current) {\n+      tcr.current = new TencetCloudRecord()\n+    }\n+    \n   }, [])\n \n+  // const startRecord = async () => {\n+  //   try {\n+  //     await record.current?.startRecord()\n+  //     setOpen(true);\n+  //   } catch (error) {\n+  //     console.log('error', error);\n+  //   }\n+  // }\n+\n+  // const playRecord = async () => {\n+  //   try {\n+  //     await record.current?.stopRecord()\n+  //     setOpen(false);\n+  //   } catch (error) {\n+  //     console.log('error', error);\n+  //   }\n+  // }\n+\n+\n   const startRecord = async () => {\n     try {\n-      await record.current?.startRecord()\n-      setOpen(true);\n-    } catch (error) {\n-      console.log('error', error);\n-    }\n+      await tcr.current?.startRecord()\n+      setOpen(true)\n+    } catch(error) {}\n   }\n \n+  \n   const playRecord = async () => {\n     try {\n-      await record.current?.stopRecord()\n-      setOpen(false);\n-    } catch (error) {\n-      console.log('error', error);\n-    }\n-  }\n-\n+      await tcr.current?.stopRecord()\n+      setOpen(false)\n+    } catch(error) {}\n+    \n   return (\n     <div>\n       <Flex\n         className={classes.utilsContainer}\n"
                },
                {
                    "date": 1681704599706,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -101,9 +101,10 @@\n     try {\n       await tcr.current?.stopRecord()\n       setOpen(false)\n     } catch(error) {}\n-    \n+  }\n+\n   return (\n     <div>\n       <Flex\n         className={classes.utilsContainer}\n"
                },
                {
                    "date": 1681704772281,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,9 @@\n /*\n  * @Author: Allen OYang\n  * @Email:  allenwill211@gmail.com\n  * @Date: 2023-04-14 16:09:48\n- * @LastEditTime: 2023-04-17 10:36:03\n+ * @LastEditTime: 2023-04-17 12:12:52\n  * @LastEditors: Allen OYang allenwill211@gmail.com\n  * @FilePath: /speak-gpt/src/components/ChatTextarea.tsx\n  */\n \n@@ -21,9 +21,9 @@\n   IconSend,\n   IconMicrophone2Off\n } from '@tabler/icons-react';\n import { useEffect, useRef, useState } from 'react';\n-import { Record } from '@/core/Record/Record'\n+// import { Record } from '@/core/Record/Record'\n import {TencetCloudRecord} from '@/core/TencetcloudRecord'\n \n \n const useStyles = createStyles((theme) => ({\n@@ -55,15 +55,15 @@\n \n export function ChatTextarea() {\n   const { classes, theme } = useStyles();\n   const [isOpen, setOpen] = useState(false);\n-  const record = useRef<Record>()\n+  // const record = useRef<Record>()\n   const tcr = useRef<TencetCloudRecord>()\n \n   useEffect(() => {\n-    if (!record.current) {\n-      record.current = new Record()\n-    }\n+    // if (!record.current) {\n+    //   record.current = new Record()\n+    // }\n \n     if (!tcr.current) {\n       tcr.current = new TencetCloudRecord()\n     }\n"
                },
                {
                    "date": 1681711992895,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -22,9 +22,9 @@\n   IconMicrophone2Off\n } from '@tabler/icons-react';\n import { useEffect, useRef, useState } from 'react';\n // import { Record } from '@/core/Record/Record'\n-import {TencetCloudRecord} from '@/core/TencetcloudRecord'\n+import {TencetCloudRecord} from '@/extensions/TencetcloudRecord'\n \n \n const useStyles = createStyles((theme) => ({\n   container: {\n"
                },
                {
                    "date": 1681712592508,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -22,9 +22,9 @@\n   IconMicrophone2Off\n } from '@tabler/icons-react';\n import { useEffect, useRef, useState } from 'react';\n // import { Record } from '@/core/Record/Record'\n-import {TencetCloudRecord} from '@/extensions/TencetcloudRecord'\n+import {TencetCloudRecord} from '@/core/TencetcloudRecord'\n \n \n const useStyles = createStyles((theme) => ({\n   container: {\n"
                },
                {
                    "date": 1681712619974,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -22,9 +22,9 @@\n   IconMicrophone2Off\n } from '@tabler/icons-react';\n import { useEffect, useRef, useState } from 'react';\n // import { Record } from '@/core/Record/Record'\n-import {TencetCloudRecord} from '@/core/TencetcloudRecord'\n+import {TencetCloudRecord} from '@/extensions/TencetcloudRecord'\n \n \n const useStyles = createStyles((theme) => ({\n   container: {\n"
                },
                {
                    "date": 1681716225889,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -22,11 +22,17 @@\n   IconMicrophone2Off\n } from '@tabler/icons-react';\n import { useEffect, useRef, useState } from 'react';\n // import { Record } from '@/core/Record/Record'\n-import {TencetCloudRecord} from '@/extensions/TencetcloudRecord'\n+import type { TencetCloudRecord } from '@/extensions/TencetcloudRecord'\n+import { InstallExtension } from '@/core/InstallExtension';\n \n \n+type Extensions = {\n+  TencetCloudRecord: TencetCloudRecord\n+}\n+\n+\n const useStyles = createStyles((theme) => ({\n   container: {\n     display: 'flex',\n     alignItems: 'center',\n@@ -56,53 +62,34 @@\n export function ChatTextarea() {\n   const { classes, theme } = useStyles();\n   const [isOpen, setOpen] = useState(false);\n   // const record = useRef<Record>()\n-  const tcr = useRef<TencetCloudRecord>()\n+  const tcr = useRef<InstallExtension>()\n+  const CEX = useRef<string>()\n+  const Ctf = useRef<Extensions['TencetCloudRecord']>()\n \n   useEffect(() => {\n-    // if (!record.current) {\n-    //   record.current = new Record()\n-    // }\n-\n     if (!tcr.current) {\n-      tcr.current = new TencetCloudRecord()\n+      tcr.current = new InstallExtension()\n+      CEX.current = tcr.current.currUseExtension\n+      Ctf.current = tcr.current?.getCurrExtension<Extensions['TencetCloudRecord']>()\n     }\n-    \n   }, [])\n \n-  // const startRecord = async () => {\n-  //   try {\n-  //     await record.current?.startRecord()\n-  //     setOpen(true);\n-  //   } catch (error) {\n-  //     console.log('error', error);\n-  //   }\n-  // }\n \n-  // const playRecord = async () => {\n-  //   try {\n-  //     await record.current?.stopRecord()\n-  //     setOpen(false);\n-  //   } catch (error) {\n-  //     console.log('error', error);\n-  //   }\n-  // }\n-\n-\n   const startRecord = async () => {\n     try {\n-      await tcr.current?.startRecord()\n+      await Ctf.current?.startRecord()\n       setOpen(true)\n-    } catch(error) {}\n+    } catch (error) { }\n   }\n \n-  \n+\n   const playRecord = async () => {\n     try {\n-      await tcr.current?.stopRecord()\n+      await Ctf.current?.stopRecord()\n       setOpen(false)\n-    } catch(error) {}\n+    } catch (error) { }\n   }\n \n   return (\n     <div>\n"
                },
                {
                    "date": 1681716948843,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -63,31 +63,27 @@\n   const { classes, theme } = useStyles();\n   const [isOpen, setOpen] = useState(false);\n   // const record = useRef<Record>()\n   const tcr = useRef<InstallExtension>()\n-  const CEX = useRef<string>()\n-  const Ctf = useRef<Extensions['TencetCloudRecord']>()\n \n   useEffect(() => {\n     if (!tcr.current) {\n       tcr.current = new InstallExtension()\n-      CEX.current = tcr.current.currUseExtension\n-      Ctf.current = tcr.current?.getCurrExtension<Extensions['TencetCloudRecord']>()\n     }\n   }, [])\n \n \n   const startRecord = async () => {\n     try {\n-      await Ctf.current?.startRecord()\n+      await tcr.current?.startRecord()\n       setOpen(true)\n     } catch (error) { }\n   }\n \n \n   const playRecord = async () => {\n     try {\n-      await Ctf.current?.stopRecord()\n+      await tcr.current?.stopRecord()\n       setOpen(false)\n     } catch (error) { }\n   }\n \n"
                },
                {
                    "date": 1681717786097,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -70,9 +70,23 @@\n       tcr.current = new InstallExtension()\n     }\n   }, [])\n \n+  const addListen = () => {\n+    tcr.current!.on('ResultChange', (text: string) => {\n+      console.log('ResultChange', text)\n+    })\n \n+    tcr.current!.on('SentenceEnd', (text: string) => {\n+      console.log('SentenceEnd', text)\n+    })\n+\n+    tcr.current!.on('OnRecognitionComplete', (text: string) => {\n+      console.log('OnRecognitionComplete', text)\n+    })\n+  }\n+\n+\n   const startRecord = async () => {\n     try {\n       await tcr.current?.startRecord()\n       setOpen(true)\n"
                },
                {
                    "date": 1681717795513,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -67,8 +67,9 @@\n \n   useEffect(() => {\n     if (!tcr.current) {\n       tcr.current = new InstallExtension()\n+      addListen()\n     }\n   }, [])\n \n   const addListen = () => {\n"
                },
                {
                    "date": 1681718132105,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,146 @@\n+/*\n+ * @Author: Allen OYang\n+ * @Email:  allenwill211@gmail.com\n+ * @Date: 2023-04-14 16:09:48\n+ * @LastEditTime: 2023-04-17 12:12:52\n+ * @LastEditors: Allen OYang allenwill211@gmail.com\n+ * @FilePath: /speak-gpt/src/components/ChatTextarea.tsx\n+ */\n+\n+import {\n+  Textarea,\n+  ActionIcon,\n+  Button,\n+  createStyles,\n+  Select,\n+  Flex\n+} from '@mantine/core';\n+\n+import {\n+  IconMicrophone2,\n+  IconSend,\n+  IconMicrophone2Off\n+} from '@tabler/icons-react';\n+import { useEffect, useRef, useState } from 'react';\n+// import { Record } from '@/core/Record/Record'\n+import type { TencetCloudRecord } from '@/extensions/TencetcloudRecord'\n+import { InstallExtension } from '@/core/InstallExtension';\n+\n+\n+type Extensions = {\n+  TencetCloudRecord: TencetCloudRecord\n+}\n+\n+\n+const useStyles = createStyles((theme) => ({\n+  container: {\n+    display: 'flex',\n+    alignItems: 'center',\n+    justifyContent: 'space-between',\n+    position: 'relative',\n+  },\n+  textarea: {\n+    flex: 1,\n+  },\n+  iconContainer: {\n+    height: '100%',\n+    display: 'flex',\n+    alignItems: 'center',\n+    justifyContent: 'center',\n+    position: 'absolute',\n+    right: 0,\n+    padding: `${theme.spacing.xs} ${theme.spacing.sm}`\n+  },\n+\n+  utilsContainer: {\n+    paddingLeft: `${theme.spacing.xs} ${theme.spacing.sm}`\n+  }\n+}));\n+\n+\n+\n+export function ChatTextarea() {\n+  const { classes, theme } = useStyles();\n+  const [isOpen, setOpen] = useState(false);\n+  // const record = useRef<Record>()\n+  const tcr = useRef<InstallExtension>()\n+\n+  useEffect(() => {\n+    if (!tcr.current) {\n+      tcr.current = new InstallExtension()\n+      addListen()\n+    }\n+  }, [])\n+\n+  const addListen = () => {\n+    InstallExtension.emitter.on('ResultChange', (text: string) => {\n+      console.log('ResultChange', text)\n+    })\n+\n+    InstallExtension.emitter.on('SentenceEnd', (text: string) => {\n+      console.log('SentenceEnd', text)\n+    })\n+\n+    InstallExtension.emitter.on('OnRecognitionComplete', (text: string) => {\n+      console.log('OnRecognitionComplete', text)\n+    })\n+  }\n+\n+\n+  const startRecord = async () => {\n+    try {\n+      await tcr.current?.startRecord()\n+      setOpen(true)\n+    } catch (error) { }\n+  }\n+\n+\n+  const playRecord = async () => {\n+    try {\n+      await tcr.current?.stopRecord()\n+      setOpen(false)\n+    } catch (error) { }\n+  }\n+\n+  return (\n+    <div>\n+      <Flex\n+        className={classes.utilsContainer}\n+        mih={50}\n+        gap=\"md\"\n+        justify=\"space-between\"\n+        align=\"center\"\n+        direction=\"row\"\n+        wrap=\"wrap\"\n+      >\n+        <ActionIcon color=\"cyan\" size=\"lg\" onClick={isOpen ? playRecord : startRecord}>\n+          {\n+            isOpen ? <IconMicrophone2 size=\"1.625rem\" /> : <IconMicrophone2Off size=\"1.625rem\" />\n+          }\n+        </ActionIcon>\n+\n+\n+        <Select\n+          placeholder=\"Pick one\"\n+          defaultValue=\"aliyun\"\n+          data={[\n+            { value: 'aliyun', label: 'Aliyun' },\n+          ]}\n+        />\n+      </Flex>\n+\n+      <div className={classes.container}>\n+        <Textarea\n+          className={classes.textarea}\n+          placeholder=\"Your question\"\n+          withAsterisk\n+        />\n+        <div className={classes.iconContainer}>\n+          <ActionIcon color=\"cyan\" size=\"lg\">\n+            <IconSend size=\"1.625rem\" />\n+          </ActionIcon>\n+        </div>\n+      </div>\n+    </div>\n+  )\n+}\n\\ No newline at end of file\n"
                },
                {
                    "date": 1681719112421,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,9 @@\n /*\n  * @Author: Allen OYang\n  * @Email:  allenwill211@gmail.com\n  * @Date: 2023-04-14 16:09:48\n- * @LastEditTime: 2023-04-17 12:12:52\n+ * @LastEditTime: 2023-04-17 16:11:52\n  * @LastEditors: Allen OYang allenwill211@gmail.com\n  * @FilePath: /speak-gpt/src/components/ChatTextarea.tsx\n  */\n \n@@ -20,19 +20,14 @@\n   IconMicrophone2,\n   IconSend,\n   IconMicrophone2Off\n } from '@tabler/icons-react';\n+\n import { useEffect, useRef, useState } from 'react';\n-// import { Record } from '@/core/Record/Record'\n-import type { TencetCloudRecord } from '@/extensions/TencetcloudRecord'\n import { InstallExtension } from '@/core/InstallExtension';\n \n \n-type Extensions = {\n-  TencetCloudRecord: TencetCloudRecord\n-}\n \n-\n const useStyles = createStyles((theme) => ({\n   container: {\n     display: 'flex',\n     alignItems: 'center',\n@@ -59,11 +54,11 @@\n \n \n \n export function ChatTextarea() {\n-  const { classes, theme } = useStyles();\n+  const { classes } = useStyles();\n   const [isOpen, setOpen] = useState(false);\n-  // const record = useRef<Record>()\n+  const [textarea, setTextarea] = useState<string>('')\n   const tcr = useRef<InstallExtension>()\n \n   useEffect(() => {\n     if (!tcr.current) {\n@@ -74,8 +69,9 @@\n \n   const addListen = () => {\n     InstallExtension.emitter.on('ResultChange', (text: string) => {\n       console.log('ResultChange', text)\n+      setTextarea(text)\n     })\n \n     InstallExtension.emitter.on('SentenceEnd', (text: string) => {\n       console.log('SentenceEnd', text)\n@@ -132,8 +128,9 @@\n       <div className={classes.container}>\n         <Textarea\n           className={classes.textarea}\n           placeholder=\"Your question\"\n+          value={textarea}\n           withAsterisk\n         />\n         <div className={classes.iconContainer}>\n           <ActionIcon color=\"cyan\" size=\"lg\">\n@@ -142,151 +139,5 @@\n         </div>\n       </div>\n     </div>\n   )\n-}\n-/*\n- * @Author: Allen OYang\n- * @Email:  allenwill211@gmail.com\n- * @Date: 2023-04-14 16:09:48\n- * @LastEditTime: 2023-04-17 12:12:52\n- * @LastEditors: Allen OYang allenwill211@gmail.com\n- * @FilePath: /speak-gpt/src/components/ChatTextarea.tsx\n- */\n-\n-import {\n-  Textarea,\n-  ActionIcon,\n-  Button,\n-  createStyles,\n-  Select,\n-  Flex\n-} from '@mantine/core';\n-\n-import {\n-  IconMicrophone2,\n-  IconSend,\n-  IconMicrophone2Off\n-} from '@tabler/icons-react';\n-import { useEffect, useRef, useState } from 'react';\n-// import { Record } from '@/core/Record/Record'\n-import type { TencetCloudRecord } from '@/extensions/TencetcloudRecord'\n-import { InstallExtension } from '@/core/InstallExtension';\n-\n-\n-type Extensions = {\n-  TencetCloudRecord: TencetCloudRecord\n-}\n-\n-\n-const useStyles = createStyles((theme) => ({\n-  container: {\n-    display: 'flex',\n-    alignItems: 'center',\n-    justifyContent: 'space-between',\n-    position: 'relative',\n-  },\n-  textarea: {\n-    flex: 1,\n-  },\n-  iconContainer: {\n-    height: '100%',\n-    display: 'flex',\n-    alignItems: 'center',\n-    justifyContent: 'center',\n-    position: 'absolute',\n-    right: 0,\n-    padding: `${theme.spacing.xs} ${theme.spacing.sm}`\n-  },\n-\n-  utilsContainer: {\n-    paddingLeft: `${theme.spacing.xs} ${theme.spacing.sm}`\n-  }\n-}));\n-\n-\n-\n-export function ChatTextarea() {\n-  const { classes, theme } = useStyles();\n-  const [isOpen, setOpen] = useState(false);\n-  // const record = useRef<Record>()\n-  const tcr = useRef<InstallExtension>()\n-\n-  useEffect(() => {\n-    if (!tcr.current) {\n-      tcr.current = new InstallExtension()\n-      addListen()\n-    }\n-  }, [])\n-\n-  const addListen = () => {\n-    tcr.current!.on('ResultChange', (text: string) => {\n-      console.log('ResultChange', text)\n-    })\n-\n-    tcr.current!.on('SentenceEnd', (text: string) => {\n-      console.log('SentenceEnd', text)\n-    })\n-\n-    tcr.current!.on('OnRecognitionComplete', (text: string) => {\n-      console.log('OnRecognitionComplete', text)\n-    })\n-  }\n-\n-\n-  const startRecord = async () => {\n-    try {\n-      await tcr.current?.startRecord()\n-      setOpen(true)\n-    } catch (error) { }\n-  }\n-\n-\n-  const playRecord = async () => {\n-    try {\n-      await tcr.current?.stopRecord()\n-      setOpen(false)\n-    } catch (error) { }\n-  }\n-\n-  return (\n-    <div>\n-      <Flex\n-        className={classes.utilsContainer}\n-        mih={50}\n-        gap=\"md\"\n-        justify=\"space-between\"\n-        align=\"center\"\n-        direction=\"row\"\n-        wrap=\"wrap\"\n-      >\n-        <ActionIcon color=\"cyan\" size=\"lg\" onClick={isOpen ? playRecord : startRecord}>\n-          {\n-            isOpen ? <IconMicrophone2 size=\"1.625rem\" /> : <IconMicrophone2Off size=\"1.625rem\" />\n-          }\n-        </ActionIcon>\n-\n-\n-        <Select\n-          placeholder=\"Pick one\"\n-          defaultValue=\"aliyun\"\n-          data={[\n-            { value: 'aliyun', label: 'Aliyun' },\n-          ]}\n-        />\n-      </Flex>\n-\n-      <div className={classes.container}>\n-        <Textarea\n-          className={classes.textarea}\n-          placeholder=\"Your question\"\n-          withAsterisk\n-        />\n-        <div className={classes.iconContainer}>\n-          <ActionIcon color=\"cyan\" size=\"lg\">\n-            <IconSend size=\"1.625rem\" />\n-          </ActionIcon>\n-        </div>\n-      </div>\n-    </div>\n-  )\n }\n\\ No newline at end of file\n"
                },
                {
                    "date": 1681719172779,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,9 @@\n /*\n  * @Author: Allen OYang\n  * @Email:  allenwill211@gmail.com\n  * @Date: 2023-04-14 16:09:48\n- * @LastEditTime: 2023-04-17 16:11:52\n+ * @LastEditTime: 2023-04-17 16:12:52\n  * @LastEditors: Allen OYang allenwill211@gmail.com\n  * @FilePath: /speak-gpt/src/components/ChatTextarea.tsx\n  */\n \n@@ -83,22 +83,23 @@\n   }\n \n \n   const startRecord = async () => {\n-    try {\n-      await tcr.current?.startRecord()\n-      setOpen(true)\n-    } catch (error) { }\n+    await tcr.current?.startRecord()\n+    setOpen(true)\n   }\n \n \n   const playRecord = async () => {\n-    try {\n-      await tcr.current?.stopRecord()\n-      setOpen(false)\n-    } catch (error) { }\n+    await tcr.current?.stopRecord()\n+    setOpen(false)\n+\n   }\n \n+  const onChangeTextarea = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\n+    setTextarea(e.target.value)\n+  }\n+\n   return (\n     <div>\n       <Flex\n         className={classes.utilsContainer}\n@@ -129,8 +130,9 @@\n         <Textarea\n           className={classes.textarea}\n           placeholder=\"Your question\"\n           value={textarea}\n+          onChange={onChangeTextarea}\n           withAsterisk\n         />\n         <div className={classes.iconContainer}>\n           <ActionIcon color=\"cyan\" size=\"lg\">\n"
                },
                {
                    "date": 1681719227516,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -84,8 +84,9 @@\n \n \n   const startRecord = async () => {\n     await tcr.current?.startRecord()\n+    setTextarea('')\n     setOpen(true)\n   }\n \n \n"
                },
                {
                    "date": 1681719727150,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,9 @@\n /*\n  * @Author: Allen OYang\n  * @Email:  allenwill211@gmail.com\n  * @Date: 2023-04-14 16:09:48\n- * @LastEditTime: 2023-04-17 16:12:52\n+ * @LastEditTime: 2023-04-17 16:22:04\n  * @LastEditors: Allen OYang allenwill211@gmail.com\n  * @FilePath: /speak-gpt/src/components/ChatTextarea.tsx\n  */\n \n@@ -57,8 +57,9 @@\n export function ChatTextarea() {\n   const { classes } = useStyles();\n   const [isOpen, setOpen] = useState(false);\n   const [textarea, setTextarea] = useState<string>('')\n+  const [selectData, setSelectData] = useState< {value: string, label: string}[]>([])\n   const tcr = useRef<InstallExtension>()\n \n   useEffect(() => {\n     if (!tcr.current) {\n@@ -71,19 +72,14 @@\n     InstallExtension.emitter.on('ResultChange', (text: string) => {\n       console.log('ResultChange', text)\n       setTextarea(text)\n     })\n-\n-    InstallExtension.emitter.on('SentenceEnd', (text: string) => {\n-      console.log('SentenceEnd', text)\n+    \n+    InstallExtension.emitter.on('changeExtension', (data: {value: string, label: string}[]) => {\n+      setSelectData(data)\n     })\n-\n-    InstallExtension.emitter.on('OnRecognitionComplete', (text: string) => {\n-      console.log('OnRecognitionComplete', text)\n-    })\n   }\n \n-\n   const startRecord = async () => {\n     await tcr.current?.startRecord()\n     setTextarea('')\n     setOpen(true)\n@@ -116,15 +112,12 @@\n             isOpen ? <IconMicrophone2 size=\"1.625rem\" /> : <IconMicrophone2Off size=\"1.625rem\" />\n           }\n         </ActionIcon>\n \n-\n         <Select\n           placeholder=\"Pick one\"\n           defaultValue=\"aliyun\"\n-          data={[\n-            { value: 'aliyun', label: 'Aliyun' },\n-          ]}\n+          data={selectData}\n         />\n       </Flex>\n \n       <div className={classes.container}>\n"
                },
                {
                    "date": 1681719976596,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,9 @@\n /*\n  * @Author: Allen OYang\n  * @Email:  allenwill211@gmail.com\n  * @Date: 2023-04-14 16:09:48\n- * @LastEditTime: 2023-04-17 16:22:04\n+ * @LastEditTime: 2023-04-17 16:26:16\n  * @LastEditors: Allen OYang allenwill211@gmail.com\n  * @FilePath: /speak-gpt/src/components/ChatTextarea.tsx\n  */\n \n@@ -69,13 +69,13 @@\n   }, [])\n \n   const addListen = () => {\n     InstallExtension.emitter.on('ResultChange', (text: string) => {\n-      console.log('ResultChange', text)\n       setTextarea(text)\n     })\n     \n     InstallExtension.emitter.on('changeExtension', (data: {value: string, label: string}[]) => {\n+      console.log('ResultChange', data)\n       setSelectData(data)\n     })\n   }\n \n@@ -114,9 +114,9 @@\n         </ActionIcon>\n \n         <Select\n           placeholder=\"Pick one\"\n-          defaultValue=\"aliyun\"\n+          defaultValue={selectData && selectData[0].label}\n           data={selectData}\n         />\n       </Flex>\n \n"
                },
                {
                    "date": 1681719994671,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -114,9 +114,9 @@\n         </ActionIcon>\n \n         <Select\n           placeholder=\"Pick one\"\n-          defaultValue={selectData && selectData[0].label}\n+          defaultValue={selectData.length ? selectData[0].label : ''}\n           data={selectData}\n         />\n       </Flex>\n \n"
                },
                {
                    "date": 1681720100752,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -72,9 +72,9 @@\n     InstallExtension.emitter.on('ResultChange', (text: string) => {\n       setTextarea(text)\n     })\n     \n-    InstallExtension.emitter.on('changeExtension', (data: {value: string, label: string}[]) => {\n+    InstallExtension.emitter.on('ChangeExtension', (data: {value: string, label: string}[]) => {\n       console.log('ResultChange', data)\n       setSelectData(data)\n     })\n   }\n"
                },
                {
                    "date": 1681720199223,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -63,8 +63,9 @@\n \n   useEffect(() => {\n     if (!tcr.current) {\n       tcr.current = new InstallExtension()\n+      setSelectData(tcr.current.extensions)\n       addListen()\n     }\n   }, [])\n \n"
                },
                {
                    "date": 1681720209486,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -72,13 +72,8 @@\n   const addListen = () => {\n     InstallExtension.emitter.on('ResultChange', (text: string) => {\n       setTextarea(text)\n     })\n-    \n-    InstallExtension.emitter.on('ChangeExtension', (data: {value: string, label: string}[]) => {\n-      console.log('ResultChange', data)\n-      setSelectData(data)\n-    })\n   }\n \n   const startRecord = async () => {\n     await tcr.current?.startRecord()\n"
                },
                {
                    "date": 1681720225966,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -63,8 +63,9 @@\n \n   useEffect(() => {\n     if (!tcr.current) {\n       tcr.current = new InstallExtension()\n+      console.log('tcr.current.extensions', tcr.current.extensions)\n       setSelectData(tcr.current.extensions)\n       addListen()\n     }\n   }, [])\n"
                },
                {
                    "date": 1681720305908,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,9 @@\n /*\n  * @Author: Allen OYang\n  * @Email:  allenwill211@gmail.com\n  * @Date: 2023-04-14 16:09:48\n- * @LastEditTime: 2023-04-17 16:26:16\n+ * @LastEditTime: 2023-04-17 16:31:45\n  * @LastEditors: Allen OYang allenwill211@gmail.com\n  * @FilePath: /speak-gpt/src/components/ChatTextarea.tsx\n  */\n \n@@ -58,15 +58,17 @@\n   const { classes } = useStyles();\n   const [isOpen, setOpen] = useState(false);\n   const [textarea, setTextarea] = useState<string>('')\n   const [selectData, setSelectData] = useState< {value: string, label: string}[]>([])\n+  const [selectValue, setSelectValue] = useState<string>('')\n   const tcr = useRef<InstallExtension>()\n \n   useEffect(() => {\n     if (!tcr.current) {\n       tcr.current = new InstallExtension()\n       console.log('tcr.current.extensions', tcr.current.extensions)\n       setSelectData(tcr.current.extensions)\n+      setSelectValue(tcr.current.extensions[0].value)\n       addListen()\n     }\n   }, [])\n \n@@ -111,9 +113,9 @@\n         </ActionIcon>\n \n         <Select\n           placeholder=\"Pick one\"\n-          defaultValue={selectData.length ? selectData[0].label : ''}\n+          value={selectValue}\n           data={selectData}\n         />\n       </Flex>\n \n"
                },
                {
                    "date": 1681720389878,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,9 @@\n /*\n  * @Author: Allen OYang\n  * @Email:  allenwill211@gmail.com\n  * @Date: 2023-04-14 16:09:48\n- * @LastEditTime: 2023-04-17 16:31:45\n+ * @LastEditTime: 2023-04-17 16:33:09\n  * @LastEditors: Allen OYang allenwill211@gmail.com\n  * @FilePath: /speak-gpt/src/components/ChatTextarea.tsx\n  */\n \n@@ -64,9 +64,8 @@\n \n   useEffect(() => {\n     if (!tcr.current) {\n       tcr.current = new InstallExtension()\n-      console.log('tcr.current.extensions', tcr.current.extensions)\n       setSelectData(tcr.current.extensions)\n       setSelectValue(tcr.current.extensions[0].value)\n       addListen()\n     }\n"
                }
            ],
            "date": 1681460220455,
            "name": "Commit-0",
            "content": "/*\n * @Author: Allen OYang\n * @Email:  allenwill211@gmail.com\n * @Date: 2023-04-14 16:09:48\n * @LastEditTime: 2023-04-14 16:13:06\n * @LastEditors: Allen OYang allenwill211@gmail.com\n * @FilePath: /speak-gpt/src/components/ChatText.tsx\n */\n\nimport { Textarea } from '@mantine/core';\nexport function ChatTextarea() {\n  return (\n    <>\n      <Textarea\n        placeholder=\"Your comment\"\n        withAsterisk\n      />\n    </>\n  )\n}"
        }
    ]
}